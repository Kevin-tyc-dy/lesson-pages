```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kevinçš„åœ‹å°å››å¹´ç´šåˆ†æ•¸åŠ æ³•æ¨‚åœ’ - äº’å‹•å­¸ç¿’</title>
    <meta name="description" content="å°ˆç‚ºåœ‹å°å››å¹´ç´šå­¸ç”Ÿè¨­è¨ˆçš„åˆ†æ•¸åŠ æ³•äº’å‹•å­¸ç¿’ç¶²é ã€‚é€ééŠæˆ²ã€å‹•ç•«å’Œç·´ç¿’ï¼Œè¼•é¬†ç†è§£åˆ†æ•¸åŠ æ³•æ¦‚å¿µã€‚">
    <!-- å¼•å…¥Google Fontsæˆ–å…¶ä»–è‡ªè¨‚å­—é«”ï¼Œä¾‹å¦‚'Noto Sans TC'æˆ–'Kalam'å¢åŠ æ´»æ½‘æ„Ÿ -->
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* æ•´é«”æ¨£å¼è¨­å®šï¼Œç¢ºä¿è¦–è¦ºçµ±ä¸€å’ŒéŸ¿æ‡‰å¼è¨­è¨ˆ */
        :root {
            --primary-color: #4CAF50; /* ä¸»è‰²èª¿ï¼šç¶ è‰²ï¼Œä»£è¡¨æˆé•·èˆ‡æ´»åŠ› */
            --secondary-color: #FFC107; /* æ¬¡è¦è‰²èª¿ï¼šé»ƒè‰²ï¼Œä»£è¡¨é™½å…‰èˆ‡å¿«æ¨‚ */
            --accent-color: #2196F3; /* å¼·èª¿è‰²ï¼šè—è‰²ï¼Œä»£è¡¨çŸ¥è­˜èˆ‡æ¸…çˆ½ */
            --background-light: #E8F5E9; /* æ·ºèƒŒæ™¯è‰² */
            --text-dark: #333;
            --text-light: #fff;
            --border-radius-lg: 15px;
            --box-shadow-light: 0 4px 8px rgba(0, 0, 0, 0.1);
            --box-shadow-hover: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-light);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ»¾å‹• */
        }

        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: var(--text-light);
            padding: 20px 0;
            text-align: center;
            box-shadow: var(--box-shadow-light);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        header h1 {
            font-family: 'Kalam', cursive;
            margin: 0;
            font-size: 2.8em;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        header p {
            font-size: 1.1em;
            margin-top: 5px;
        }

        main {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        section {
            background-color: var(--text-light);
            padding: 30px;
            margin-bottom: 40px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-light);
            transition: transform 0.3s ease-in-out;
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-hover);
        }

        h2 {
            font-family: 'Kalam', cursive;
            color: var(--accent-color);
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
            display: inline-block;
            width: auto;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        h3 {
            color: var(--primary-color);
            font-size: 1.5em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        p {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .interactive-element {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            flex: 1;
            min-width: 280px;
            max-width: 45%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.2s ease-in-out;
        }

        .interactive-element:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease, transform 0.1s ease;
            box-shadow: var(--box-shadow-light);
            margin: 5px;
        }

        .btn:hover {
            background-color: #5cb85c;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--accent-color);
        }

        .btn-secondary:hover {
            background-color: #3f9bff;
        }

        /* è¼¸å…¥æ¡†æ¨£å¼ */
        input[type="number"], input[type="text"] {
            padding: 10px 15px;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            font-size: 1.1em;
            width: 80px;
            text-align: center;
            margin: 0 5px;
            transition: border-color 0.3s ease;
        }

        input[type="number"]:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
        }

        /* åœ–å½¢å±•ç¤ºæ¨£å¼ (ç¤ºæ„) */
        .fraction-model {
            width: 150px;
            height: 150px;
            border: 2px solid var(--primary-color);
            border-radius: 50%; /* åœ“é¤…åœ– */
            margin: 15px auto;
            position: relative;
            overflow: hidden;
            background-color: #eee;
        }

        .fraction-model.bar {
            border-radius: 10px;
            height: 50px;
            width: 80%;
        }

        .fraction-part {
            background-color: var(--accent-color);
            position: absolute;
            opacity: 0.7;
        }

        .fraction-part.highlight {
            background-color: var(--secondary-color);
        }

        /* èªéŸ³å°è®€æŒ‰éˆ• */
        .voice-guide {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            color: var(--primary-color);
            margin-left: 10px;
            vertical-align: middle;
        }

        .voice-guide:hover {
            color: var(--accent-color);
        }

        /* å³æ™‚å›é¥‹ */
        .feedback {
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2em;
        }

        .feedback.correct {
            color: var(--primary-color);
        }

        .feedback.incorrect {
            color: #F44336; /* ç´…è‰²ï¼Œè¡¨ç¤ºéŒ¯èª¤ */
        }

        .progress-bar-container {
            width: 100%;
            background-color: #f0f0f0;
            border-radius: 10px;
            height: 25px;
            margin-top: 30px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 100%;
            width: 0%; /* JS will update this */
            background-color: var(--accent-color);
            border-radius: 10px;
            text-align: center;
            color: var(--text-light);
            line-height: 25px;
            transition: width 0.5s ease-in-out;
            font-size: 0.9em;
        }

        .badges-container {
            text-align: center;
            margin-top: 20px;
        }

        .badge {
            width: 60px;
            height: 60px;
            background-color: #ccc;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-size: 2em;
            color: #fff;
            transition: background-color 0.3s ease;
            box-shadow: var(--box-shadow-light);
        }

        .badge.unlocked {
            background-color: var(--secondary-color);
        }
        
        .badge.unlocked::before {
            content: 'â­'; /* å°æ˜Ÿæ˜Ÿåœ–æ¨™ */
            font-size: 1.5em;
        }
        
        .badge.locked::before {
            content: 'ğŸ”’'; /* é–å®šåœ–æ¨™ */
            font-size: 1.5em;
        }

        footer {
            text-align: center;
            padding: 25px;
            background-color: var(--primary-color);
            color: var(--text-light);
            margin-top: 50px;
            font-size: 0.9em;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            main {
                margin: 20px auto;
                padding: 0 15px;
            }
            section {
                padding: 20px;
                margin-bottom: 30px;
            }
            h2 {
                font-size: 1.8em;
            }
            .interactive-element {
                max-width: 100%;
                min-width: unset;
            }
            .container {
                flex-direction: column;
            }
            .fraction-model {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Kevinçš„åœ‹å°å››å¹´ç´šåˆ†æ•¸åŠ æ³•æ¨‚åœ’</h1>
        <p>è·Ÿè‘—å°ç²¾éˆä¸€èµ·æ¢ç´¢åˆ†æ•¸åŠ æ³•çš„å¥§ç§˜å§ï¼</p>
    </header>

    <main>
        <!-- å€å¡Šä¸€ï¼šã€åˆ†æ•¸åŠ æ³•æ˜¯ä»€éº¼ï¼Ÿã€‘ -->
        <section id="section1">
            <h2>ã€åˆ†æ•¸åŠ æ³•æ˜¯ä»€éº¼ï¼Ÿã€‘</h2>
            <div class="content-block">
                <h3>ğŸ• åˆ†æ•¸çš„é­”æ³•æŠ«è–©</h3>
                <p>æƒ³åƒä½ å’Œæœ‹å‹è¦åˆ†äº«ä¸€å€‹é¦™å™´å™´çš„æŠ«è–©ï¼é€™å€‹æŠ«è–©å°±æ˜¯ä¸€å€‹ã€Œæ•´é«”ã€ã€‚</p>
                <!-- å‹•ç•«å¼•å°å€å¡Š (placeholder) -->
                <div class="animation-container" style="background-color: #f0f0f0; border-radius: 10px; padding: 20px; text-align: center;">
                    <p>
                        <img src="https://via.placeholder.com/300x200/FFDDC1/000000?text=Animated+Pizza" alt="ä¸€å€‹è¢«åˆ‡åˆ†çš„æŠ«è–©å‹•ç•«ç¤ºæ„åœ–" style="max-width: 100%; border-radius: 8px;">
                    </p>
                    <p>é»æ“Šé€™è£¡é–‹å§‹è§€çœ‹æœ‰è¶£çš„å‹•ç•«ï¼Œäº†è§£åˆ†æ•¸æ˜¯æ€éº¼ä¾†çš„ï¼</p>
                    <button class="btn btn-secondary" onclick="playFractionIntroAnimation()">æ’­æ”¾å‹•ç•«</button>
                    <!-- å¯¦éš›é–‹ç™¼æ™‚ï¼Œé€™è£¡æœƒåµŒå…¥JSæ§åˆ¶çš„SVGå‹•ç•«æˆ–Lottieå‹•ç•« -->
                </div>

                <h3>ğŸ’¡ äº’å‹•å¼ç¯„ä¾‹ï¼šè‡ªå·±ä¾†åˆ‡æŠ«è–©ï¼</h3>
                <p>ç¾åœ¨ï¼Œè«‹ä½ ä¾†è©¦è©¦çœ‹ï¼é»æ“Šä¸‹é¢çš„æŠ«è–©ï¼Œé¸å–ä½ æƒ³è¦çš„ä»½æ•¸ï¼Œçœ‹çœ‹å®ƒæœƒè®Šæˆä»€éº¼åˆ†æ•¸ï¼Ÿ</p>
                <div class="interactive-element" style="max-width: 500px; margin: 20px auto;">
                    <div id="pizza-model" class="fraction-model" style="border-radius: 50%; background-color: #ffe0b2; position: relative;">
                        <!-- æŠ«è–©åˆ‡ç‰‡ç¤ºæ„ï¼ŒJSæœƒå‹•æ…‹ç”Ÿæˆå’Œäº’å‹• -->
                        <div class="pizza-slice" style="position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; transform: rotate(0deg) skewY(-30deg); background-color: #ffcc80; border: 1px solid #d7a86f; left: 50%; top: 50%;"></div>
                        <div class="pizza-slice" style="position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; transform: rotate(60deg) skewY(-30deg); background-color: #ffcc80; border: 1px solid #d7a86f; left: 50%; top: 50%;"></div>
                        <div class="pizza-slice" style="position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; transform: rotate(120deg) skewY(-30deg); background-color: #ffcc80; border: 1px solid #d7a86f; left: 50%; top: 50%;"></div>
                        <div class="pizza-slice" style="position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; transform: rotate(180deg) skewY(-30deg); background-color: #ffcc80; border: 1px solid #d7a86f; left: 50%; top: 50%;"></div>
                        <div class="pizza-slice" style="position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; transform: rotate(240deg) skewY(-30deg); background-color: #ffcc80; border: 1px solid #d7a86f; left: 50%; top: 50%;"></div>
                        <div class="pizza-slice" style="position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; transform: rotate(300deg) skewY(-30deg); background-color: #ffcc80; border: 1px solid #d7a86f; left: 50%; top: 50%;"></div>
                        <!-- æ¨¡æ“¬6ç­‰ä»½æŠ«è–©ï¼Œå¯¦éš›æœƒç”¨JSç”Ÿæˆå’Œè™•ç†é»æ“Šäº‹ä»¶ -->
                    </div>
                    <p>ä½ é¸æ“‡äº† <span id="selected-fraction" style="font-weight: bold; color: var(--accent-color); font-size: 1.3em;">0/6</span> ç‰‡æŠ«è–©ï¼</p>
                    <button class="btn btn-secondary" onclick="resetPizza()">é‡ç½®</button>
                    <!-- å¯¦éš›JSå°‡æœƒç‚ºæ¯å€‹pizza-sliceæ·»åŠ é»æ“Šäº‹ä»¶ -->
                </div>

                <h3>ğŸ¤” åˆ†æ•¸åŠ æ³•çš„æ¦‚å¿µ</h3>
                <p>Kevinåƒäº†ä¸€ç‰‡æŠ«è–© (ä¹Ÿå°±æ˜¯ 1/6 å€‹)ï¼Œç„¶å¾Œä»–åˆåƒäº†å…©ç‰‡ (2/6 å€‹)ã€‚</p>
                <p>é‚£ Kevin ç¸½å…±åƒäº†å¹¾ç‰‡æŠ«è–©å‘¢ï¼Ÿ</p>
                <p class="feedback" style="font-size: 1.5em; text-align: center;">1ç‰‡ + 2ç‰‡ = 3ç‰‡ï¼</p>
                <p>é€™å°±æ˜¯åˆ†æ•¸åŠ æ³•æœ€ç°¡å–®çš„æ¦‚å¿µå–”ï¼</p>
            </div>
        </section>

        <!-- å€å¡ŠäºŒï¼šã€åˆ†æ¯ç›¸åŒåˆ†æ•¸çš„åŠ æ³•ã€‘ -->
        <section id="section2">
            <h2>ã€åˆ†æ¯ç›¸åŒåˆ†æ•¸çš„åŠ æ³•ã€‘<button class="voice-guide" onclick="playVoiceGuide('section2')">ğŸ”Š</button></h2>
            <div class="content-block">
                <h3>ğŸ“– é€æ­¥æ•™å­¸ï¼šæ•¸æ£’çš„ç§˜å¯†</h3>
                <p>ç•¶æˆ‘å€‘æŠŠä¸€å€‹æ•´é«”åˆ†æˆä¸€æ¨£å¤šä»½çš„æ™‚å€™ï¼Œé€™äº›ä»½æ•¸å°±æœ‰äº†ç›¸åŒçš„ã€Œåˆ†æ¯ã€ã€‚</p>
                <p>è®“æˆ‘å€‘ç”¨æ•¸æ£’ä¾†çœ‹çœ‹ï¼Œåˆ†æ¯ç›¸åŒæ™‚ï¼Œåˆ†æ•¸æ˜¯æ€éº¼ç›¸åŠ çš„å§ï¼</p>

                <div class="container">
                    <div class="interactive-element">
                        <h4>æ­¥é©Ÿä¸€ï¼šç†è§£åˆ†æ¯</h4>
                        <img src="https://via.placeholder.com/200x50/A5D6A7/000000?text=æ•¸æ£’1/4" alt="å››ç­‰ä»½æ•¸æ£’ä¸­ä¸€ä»½çš„ç¤ºæ„åœ–" style="margin-bottom: 10px; width: 80%;">
                        <p>é€™ä»£è¡¨ 1/4 (ä¸€ä»½æ•¸æ£’)</p>
                    </div>
                    <div class="interactive-element">
                        <h4>æ­¥é©ŸäºŒï¼šåŠ å…¥åˆ†æ•¸</h4>
                        <img src="https://via.placeholder.com/200x50/A5D6A7/000000?text=æ•¸æ£’2/4" alt="å››ç­‰ä»½æ•¸æ£’ä¸­å…©ä»½çš„ç¤ºæ„åœ–" style="margin-bottom: 10px; width: 80%;">
                        <p>æˆ‘å€‘å†åŠ ä¸Š 2/4 (å…©ä»½æ•¸æ£’)</p>
                    </div>
                </div>
                <div class="interactive-element" style="max-width: 600px; margin: 30px auto;">
                    <h4>æ­¥é©Ÿä¸‰ï¼šåŠ èµ·ä¾†ï¼</h4>
                    <p>ä½ æœƒç™¼ç¾ï¼Œç•¶åˆ†æ¯éƒ½æ˜¯ 4 çš„æ™‚å€™ï¼Œæˆ‘å€‘åªéœ€è¦æŠŠåˆ†å­åŠ èµ·ä¾†å°±å¥½å›‰ï¼</p>
                    <div class="fraction-model bar" style="width: 90%; margin: 15px auto;">
                        <!-- æ¨¡æ“¬æ•¸æ£’ï¼ŒJSæœƒæ§åˆ¶é¡¯ç¤º1/4 + 2/4 = 3/4 -->
                        <div style="position: absolute; left: 0; width: 25%; height: 100%; background-color: var(--accent-color);"></div>
                        <div style="position: absolute; left: 25%; width: 50%; height: 100%; background-color: var(--secondary-color);"></div>
                        <span style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); color: #fff; font-size: 1.5em; font-weight: bold;">+</span>
                        <div style="position: absolute; left: 0; width: 75%; height: 100%; background-color: var(--primary-color); opacity: 0.8; transition: width 0.5s ease;"></div>
                    </div>
                    <p>æ‰€ä»¥ï¼Œ1/4 + 2/4 = <span style="font-weight: bold; color: var(--accent-color); font-size: 1.3em;">3/4</span>ï¼</p>
                </div>

                <h3>ğŸ“ å…¬å¼åŒ–å‘ˆç¾</h3>
                <p>ç•¶åˆ†æ¯ç›¸åŒæ™‚ï¼Œåˆ†æ•¸åŠ æ³•çš„å…¬å¼å¾ˆç°¡å–®ï¼š</p>
                <div style="background-color: #f0f4f8; padding: 25px; border-radius: 12px; text-align: center; font-size: 1.8em; font-family: 'Kalam', cursive; color: var(--primary-color); box-shadow: var(--box-shadow-light); margin: 30px auto; max-width: 500px;">
                    A/C + B/C = (A + B) / C
                </div>
                <p>è¨˜ä½ï¼šåˆ†å­ç›¸åŠ ï¼Œåˆ†æ¯ä¸è®Šï¼</p>
            </div>
        </section>

        <!-- å€å¡Šä¸‰ï¼šã€å‹•æ‰‹ç·´ç¿’ã€‘ -->
        <section id="section3">
            <h2>ã€å‹•æ‰‹ç·´ç¿’ã€‘<button class="voice-guide" onclick="playVoiceGuide('section3')">ğŸ”Š</button></h2>
            <p>å°å‹‡å£«ï¼Œæº–å‚™å¥½æ¥å—æŒ‘æˆ°äº†å—ï¼Ÿå‹•å‹•æ‰‹ï¼ŒæŠŠåˆ†æ•¸åŠ æ³•è®Šç°¡å–®ï¼</p>

            <div class="progress-bar-container">
                <div id="practice-progress" class="progress-bar" style="width: 0%;">0%</div>
            </div>
            <div class="badges-container">
                <div class="badge locked" id="badge1" title="å®Œæˆ 3 é¡Œè§£é–"></div>
                <div class="badge locked" id="badge2" title="å®Œæˆ 6 é¡Œè§£é–"></div>
                <div class="badge locked" id="badge3" title="å®Œæˆæ‰€æœ‰é¡Œç›®è§£é–"></div>
            </div>

            <!-- é¡Œå‹ä¸€ï¼šåœ–å½¢é…å°é¡Œ -->
            <h3>ğŸš€ é¡Œå‹ä¸€ï¼šåœ–å½¢é…å°å¤§ä½œæˆ° (æ‹–æ›³é¡Œ)</h3>
            <p>å°‡å·¦é‚Šçš„å…©å¼µåœ–æ¡ˆæ‹–æ›³åˆ°å³é‚Šçš„ç­”æ¡ˆå€ï¼Œçœ‹çœ‹å®ƒå€‘åŠ èµ·ä¾†æœƒæ˜¯å“ªä¸€å€‹åœ–æ¡ˆï¼Ÿ</p>
            <div class="interactive-element" style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 20px;">
                <div class="drag-zone" style="display: flex; gap: 10px; border: 2px dashed #ccc; padding: 15px; border-radius: 10px; min-height: 150px; flex: 1;">
                    <img id="drag-item1" src="https://via.placeholder.com/80x80/FFC107/000000?text=1/4" alt="é»ƒè‰²1/4åœ“é¤…åœ–" draggable="true" style="cursor: grab; border: 2px solid var(--secondary-color); border-radius: 8px;">
                    <img id="drag-item2" src="https://via.placeholder.com/80x80/2196F3/000000?text=2/4" alt="è—è‰²2/4åœ“é¤…åœ–" draggable="true" style="cursor: grab; border: 2px solid var(--accent-color); border-radius: 8px;">
                    <p style="margin-left: 10px; font-size: 1.5em;"> + </p>
                </div>
                <p style="font-size: 2em; font-weight: bold;">=</p>
                <div id="drop-target-1" class="drop-zone" style="border: 2px dashed var(--primary-color); padding: 15px; border-radius: 10px; min-height: 150px; flex: 1; display: flex; align-items: center; justify-content: center; background-color: #e0f2f1;" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <p style="color: #999;">å°‡ç­”æ¡ˆåœ–æ¡ˆæ‹–æ›³åˆ°é€™è£¡</p>
                    <!-- é è¨­ç›®æ¨™åœ–ï¼Œå¯¦éš›æœƒç”±JSåˆ¤æ–·ä¸¦æ›¿æ› -->
                    <img src="https://via.placeholder.com/100x100/4CAF50/FFFFFF?text=3/4" alt="ç¶ è‰²3/4åœ“é¤…åœ–" style="display: none;" id="correct-answer-img">
                </div>
                <button class="btn" onclick="checkMatchingAnswer()">æª¢æŸ¥ç­”æ¡ˆ</button>
                <div id="feedback-match" class="feedback"></div>
            </div>

            <!-- é¡Œå‹äºŒï¼šè¨ˆç®—å¡«ç©ºé¡Œ -->
            <h3>ğŸ”¢ é¡Œå‹äºŒï¼šè¨ˆç®—é«˜æ‰‹ (å¡«ç©ºé¡Œ)</h3>
            <p>è«‹è¨ˆç®—å‡ºç­”æ¡ˆï¼Œä¸¦å°‡åˆ†å­å’Œåˆ†æ¯å¡«å…¥ç©ºæ ¼ä¸­ã€‚</p>
            <div class="interactive-element">
                <p style="font-size: 1.5em;">
                    2/5 + 1/5 =
                    <input type="number" id="q2-num" placeholder="åˆ†å­" style="width: 70px;"> /
                    <input type="number" id="q2-den" placeholder="åˆ†æ¯" style="width: 70px;">
                    <button class="btn" onclick="checkFillInAnswer(2, 3, 5)">æª¢æŸ¥</button>
                </p>
                <div id="feedback-q2" class="feedback"></div>
                <p style="font-size: 1.5em; margin-top: 20px;">
                    3/4 + 2/4 =
                    <input type="number" id="q3-num" placeholder="åˆ†å­" style="width: 70px;"> /
                    <input type="number" id="q3-den" placeholder="åˆ†æ¯" style="width: 70px;">
                    <button class="btn" onclick="checkFillInAnswer(3, 1, 4, true, true)">æª¢æŸ¥</button> (è«‹åŒ–ç‚ºå¸¶åˆ†æ•¸)</p>
                <div id="feedback-q3" class="feedback"></div>
            </div>

            <!-- é¡Œå‹ä¸‰ï¼šé¸æ“‡é¡Œ -->
            <h3>âœ… é¡Œå‹ä¸‰ï¼šé¸æ“‡é¡Œé—–é—œ (å¤šé¸é¡Œ)</h3>
            <p>ä»”ç´°çœ‹é¡Œç›®ï¼Œé¸å‡ºæ­£ç¢ºçš„ç­”æ¡ˆï¼</p>
            <div class="interactive-element">
                <p style="font-size: 1.5em;">1/3 + 1/3 = ?</p>
                <div class="options" id="q4-options">
                    <label><input type="radio" name="q4" value="1/3"> 1/3</label><br>
                    <label><input type="radio" name="q4" value="2/3"> 2/3</label><br>
                    <label><input type="radio" name="q4" value="2/6"> 2/6</label><br>
                </div>
                <button class="btn" onclick="checkMultipleChoiceAnswer(4, '2/3')">æª¢æŸ¥</button>
                <div id="feedback-q4" class="feedback"></div>
            </div>
            <div class="interactive-element">
                <p style="font-size: 1.5em;">5/6 + 3/6 = ? (è«‹åŒ–ç‚ºæœ€ç°¡åˆ†æ•¸æˆ–å¸¶åˆ†æ•¸)</p>
                <div class="options" id="q5-options">
                    <label><input type="radio" name="q5" value="8/6"> 8/6</label><br>
                    <label><input type="radio" name="q5" value="1åˆ1/3"> 1åˆ1/3</label><br>
                    <label><input type="radio" name="q5" value="1åˆ2/6"> 1åˆ2/6</label><br>
                </div>
                <button class="btn" onclick="checkMultipleChoiceAnswer(5, '1åˆ1/3')">æª¢æŸ¥</button>
                <div id="feedback-q5" class="feedback"></div>
            </div>
        </section>

        <!-- å€å¡Šå››ï¼šã€åˆ†æ•¸åŠ æ³•çš„æ‡‰ç”¨ã€‘ -->
        <section id="section4">
            <h2>ã€åˆ†æ•¸åŠ æ³•çš„æ‡‰ç”¨ã€‘<button class="voice-guide" onclick="playVoiceGuide('section4')">ğŸ”Š</button></h2>
            <p>åˆ†æ•¸ä¸åªåœ¨æ•¸å­¸èª²æœ¬è£¡ï¼Œå®ƒä¹Ÿè—åœ¨æˆ‘å€‘çš„ç”Ÿæ´»ä¸­å–”ï¼</p>

            <!-- æƒ…å¢ƒæ–‡å­—é¡Œç¯„ä¾‹ä¸€ -->
            <div class="interactive-element" style="max-width: 600px; margin: 20px auto;">
                <h3>ğŸ é¡Œç›®ä¸€ï¼šå¥¶å¥¶çš„è˜‹æœæ´¾</h3>
                <img src="https://via.placeholder.com/250x180/F0F4C3/000000?text=Apple+Pie" alt="è˜‹æœæ´¾ç¤ºæ„åœ–" style="max-width: 100%; border-radius: 8px; margin-bottom: 15px;">
                <p>å¥¶å¥¶åšäº†ä¸€å€‹ç¾å‘³çš„è˜‹æœæ´¾ï¼Œå¥¹æŠŠæ´¾åˆ‡æˆäº† 8 ç­‰ä»½ã€‚</p>
                <p>å°æ˜åƒäº† 2/8 å€‹è˜‹æœæ´¾ï¼Œå°è¯åƒäº† 3/8 å€‹è˜‹æœæ´¾ã€‚</p>
                <p>è«‹å•ï¼šä»–å€‘å…©äººç¸½å…±åƒäº†å¤šå°‘å€‹è˜‹æœæ´¾ï¼Ÿ</p>
                <button class="btn btn-secondary" onclick="showHint(1)">æç¤º</button>
                <p id="hint1" style="display: none; background-color: #fff9c4; padding: 10px; border-radius: 8px; margin-top: 10px;">æç¤ºï¼šæŠŠå°æ˜å’Œå°è¯åƒæ‰çš„ä»½æ•¸åŠ èµ·ä¾†å–”ï¼</p>
                <p style="font-size: 1.2em; margin-top: 15px;">
                    ç­”æ¡ˆï¼š
                    <input type="number" id="app-q1-num" placeholder="åˆ†å­" style="width: 70px;"> /
                    <input type="number" id="app-q1-den" placeholder="åˆ†æ¯" style="width: 70px;">
                    <button class="btn" onclick="checkApplicationAnswer(1, 5, 8)">æª¢æŸ¥</button>
                </p>
                <div id="feedback-app-q1" class="feedback"></div>
            </div>

            <!-- æƒ…å¢ƒæ–‡å­—é¡Œç¯„ä¾‹äºŒ -->
            <div class="interactive-element" style="max-width: 600px; margin: 20px auto;">
                <h3>ğŸ¥› é¡Œç›®äºŒï¼šç‰›å¥¶å¤§æŒ‘æˆ°</h3>
                <img src="https://via.placeholder.com/250x180/BBDEFB/000000?text=Milk+Glass" alt="ç‰›å¥¶æ¯ç¤ºæ„åœ–" style="max-width: 100%; border-radius: 8px; margin-bottom: 15px;">
                <p>ä¸€ç“¶ç‰›å¥¶æ˜¯ 1 åˆ 1/2 å…¬å‡ã€‚</p>
                <p>Kevin æ—©ä¸Šå–äº† 1/2 ç“¶ç‰›å¥¶ï¼Œä¸‹åˆåˆå–äº† 1/2 ç“¶ç‰›å¥¶ã€‚</p>
                <p>è«‹å•ï¼šKevin ç¸½å…±å–äº†å¤šå°‘ç“¶ç‰›å¥¶ï¼Ÿ</p>
                <button class="btn btn-secondary" onclick="showHint(2)">æç¤º</button>
                <p id="hint2" style="display: none; background-color: #fff9c4; padding: 10px; border-radius: 8px; margin-top: 10px;">æç¤ºï¼šé€™è£¡å–çš„éƒ½æ˜¯ã€Œç“¶ã€çš„å¹¾åˆ†ä¹‹å¹¾ï¼Œè«‹æ³¨æ„åˆ†æ¯æ˜¯ç›¸åŒçš„ã€‚</p>
                <p style="font-size: 1.2em; margin-top: 15px;">
                    ç­”æ¡ˆï¼š
                    <input type="text" id="app-q2-ans" placeholder="è«‹è¼¸å…¥ç­”æ¡ˆ" style="width: 120px;">
                    <button class="btn" onclick="checkApplicationAnswer(2, '1')">æª¢æŸ¥</button> (ä¾‹å¦‚ï¼š1 æˆ– 1åˆ1/2)</p>
                <div id="feedback-app-q2" class="feedback"></div>
            </div>
        </section>

        <!-- å€å¡Šäº”ï¼šã€å°æŒ‘æˆ°ï¼šå°‡å‡åˆ†æ•¸åŒ–ç‚ºå¸¶åˆ†æ•¸ã€‘ -->
        <section id="section5">
            <h2>ã€å°æŒ‘æˆ°ï¼šå°‡å‡åˆ†æ•¸åŒ–ç‚ºå¸¶åˆ†æ•¸ã€‘<button class="voice-guide" onclick="playVoiceGuide('section5')">ğŸ”Š</button></h2>
            <p>æœ‰æ™‚å€™ï¼Œåˆ†æ•¸åŠ èµ·ä¾†æœƒè®“åˆ†å­æ¯”åˆ†æ¯å¤§ï¼Œé€™æ¨£çš„åˆ†æ•¸å«åšã€Œå‡åˆ†æ•¸ã€ã€‚</p>
            <p>å‡åˆ†æ•¸å¯ä»¥è®Šèº«æˆã€Œå¸¶åˆ†æ•¸ã€ï¼Œè®“å®ƒçœ‹èµ·ä¾†æ›´æ¸…æ¥šå–”ï¼</p>

            <!-- ç°¡çŸ­èªªæ˜èˆ‡å‹•ç•« (placeholder) -->
            <div class="animation-container" style="background-color: #f0f0f0; border-radius: 10px; padding: 20px; text-align: center;">
                <p>
                    <img src="https://via.placeholder.com/300x150/CFD8DC/000000?text=Improper+to+Mixed+Animation" alt="å‡åˆ†æ•¸åŒ–å¸¶åˆ†æ•¸å‹•ç•«ç¤ºæ„åœ–" style="max-width: 100%; border-radius: 8px;">
                </p>
                <p>é»æ“Šè§€çœ‹å‡åˆ†æ•¸ 5/4 å¦‚ä½•è®Šæˆå¸¶åˆ†æ•¸ 1 åˆ 1/4 çš„å‹•ç•«ï¼</p>
                <button class="btn btn-secondary" onclick="playConversionAnimation()">æ’­æ”¾å‹•ç•«</button>
            </div>

            <h3>ğŸ”„ äº’å‹•ç·´ç¿’ï¼šè®Šèº«å¤§å¸«ï¼</h3>
            <p>å°‡ä¸‹é¢çš„å‡åˆ†æ•¸ï¼Œè®Šèº«ç‚ºå¸¶åˆ†æ•¸å§ï¼</p>
            <div class="interactive-element">
                <p style="font-size: 1.5em;">å‡åˆ†æ•¸ï¼š 7/3</p>
                <p style="font-size: 1.5em;">
                    è®Šèº«ç‚ºï¼š
                    <input type="number" id="mixed-whole" placeholder="æ•´æ•¸" style="width: 70px;"> åˆ
                    <input type="number" id="mixed-num" placeholder="åˆ†å­" style="width: 70px;"> /
                    <input type="number" id="mixed-den" placeholder="åˆ†æ¯" style="width: 70px;">
                    <button class="btn" onclick="checkMixedFraction(7, 3, 2, 1, 3)">æª¢æŸ¥</button>
                </p>
                <div id="feedback-mixed" class="feedback"></div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 Kevinçš„æ•¸å­¸æ¨‚åœ’. All rights reserved.</p>
        <p>è¨­è¨ˆçµ¦åœ‹å°å››å¹´ç´šå­¸ç”Ÿï¼Œä¸€èµ·å¿«æ¨‚å­¸ç¿’ï¼</p>
    </footer>

    <script>
        // JavaScript for interactivity
        let totalCorrectAnswers = 0;
        const totalPracticeQuestions = 5; // Total questions in Section 3
        const questionsAttempted = {}; // To track if a question has been correctly answered

        function updateProgressBar() {
            const correctCount = Object.keys(questionsAttempted).length;
            const progress = (correctCount / totalPracticeQuestions) * 100;
            const progressBar = document.getElementById('practice-progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';

            // Update badges
            if (correctCount >= 3) {
                document.getElementById('badge1').classList.add('unlocked');
                document.getElementById('badge1').classList.remove('locked');
            }
            if (correctCount >= 6) { // Assuming more questions for badges
                document.getElementById('badge2').classList.add('unlocked');
                document.getElementById('badge2').classList.remove('locked');
            }
            if (correctCount >= totalPracticeQuestions) {
                document.getElementById('badge3').classList.add('unlocked');
                document.getElementById('badge3').classList.remove('locked');
            }
        }

        // Section 1: Pizza interaction (simplified)
        const pizzaSlices = document.querySelectorAll('#pizza-model div.pizza-slice');
        let selectedSlices = 0;
        const totalSlices = 6; // Assuming 6 slices

        pizzaSlices.forEach((slice, index) => {
            slice.addEventListener('click', () => {
                if (slice.classList.contains('highlight')) {
                    slice.classList.remove('highlight');
                    selectedSlices--;
                } else {
                    slice.classList.add('highlight');
                    selectedSlices++;
                }
                document.getElementById('selected-fraction').textContent = `${selectedSlices}/${totalSlices}`;
            });
        });

        function resetPizza() {
            pizzaSlices.forEach(slice => slice.classList.remove('highlight'));
            selectedSlices = 0;
            document.getElementById('selected-fraction').textContent = `0/${totalSlices}`;
        }

        function playFractionIntroAnimation() {
            alert('æ’­æ”¾åˆ†æ•¸ä»‹ç´¹å‹•ç•«ï¼ (æ­¤ç‚ºç¤ºæ„åŠŸèƒ½)');
            // å¯¦éš›æœƒè§¸ç™¼å‹•ç•«æ’­æ”¾ï¼Œä¾‹å¦‚ä¿®æ”¹ <video> src æˆ–æ“æ§ SVG/Lottie å‹•ç•«
        }

        // Section 2: Voice Guide (simplified)
        function playVoiceGuide(sectionId) {
            let message = '';
            if (sectionId === 'section2') {
                message = 'ç¾åœ¨æˆ‘å€‘ä¾†å­¸ç¿’åˆ†æ¯ç›¸åŒçš„åˆ†æ•¸å¦‚ä½•ç›¸åŠ ï¼ä»”ç´°è½å“¦ï¼';
            } else if (sectionId === 'section3') {
                message = 'å‹•æ‰‹ç·´ç¿’æ™‚é–“ï¼çœ‹çœ‹ä½ èƒ½ç­”å°å¤šå°‘é¡Œç›®ï¼';
            } else if (sectionId === 'section4') {
                message = 'åˆ†æ•¸åŠ æ³•åœ¨ç”Ÿæ´»ä¸­æœ‰è¨±å¤šæ‡‰ç”¨ï¼Œä¸€èµ·ä¾†è§£æ±ºå•é¡Œå§ï¼';
            } else if (sectionId === 'section5') {
                message = 'å‡åˆ†æ•¸å¦‚ä½•è®Šæˆå¸¶åˆ†æ•¸å‘¢ï¼Ÿé€™å€‹å°æŒ‘æˆ°ç­‰ä½ ä¾†å®Œæˆï¼';
            }
            alert(message + ' (æ­¤ç‚ºèªéŸ³å°è®€ç¤ºæ„åŠŸèƒ½)');
            // å¯¦éš›æœƒæ’­æ”¾éŸ³è¨Šæª”æ¡ˆï¼Œä¾‹å¦‚ï¼š
            // const audio = new Audio(`audio/${sectionId}.mp3`);
            // audio.play();
        }

        // Section 3: Practice Questions
        // Drag-and-drop for Type 1
        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
        }

        function drop(event) {
            event.preventDefault();
            const data = event.dataTransfer.getData("text");
            // Only allow dropping into the drop target
            if (event.target.closest('.drop-zone')) {
                const dropTarget = event.target.closest('.drop-zone');
                const draggedElement = document.getElementById(data);
                if (draggedElement && draggedElement.tagName === 'IMG') {
                     // Check if it's the correct combination
                    if (data === "drag-item1" || data === "drag-item2") {
                        // For this specific problem (1/4 + 2/4 = 3/4), we need a specific combined image
                        // This is a placeholder for a more robust D&D system
                        dropTarget.innerHTML = ''; // Clear placeholder text
                        dropTarget.appendChild(document.getElementById('correct-answer-img').cloneNode(true));
                        dropTarget.querySelector('#correct-answer-img').style.display = 'block';
                        dropTarget.querySelector('#correct-answer-img').id = 'dropped-answer-img'; // Change ID to avoid conflict
                    }
                }
            }
        }

        function checkMatchingAnswer() {
            const dropTarget = document.getElementById('drop-target-1');
            const feedbackDiv = document.getElementById('feedback-match');
            const draggedImg = dropTarget.querySelector('#dropped-answer-img');

            if (draggedImg) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.textContent = 'å¤ªæ£’äº†ï¼ç­”å°äº†ï¼';
                if (!questionsAttempted['q1-match']) {
                    questionsAttempted['q1-match'] = true;
                    updateProgressBar();
                }
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'å†æƒ³æƒ³çœ‹å–”ï¼è¦æŠŠæ­£ç¢ºçš„åœ–æ¡ˆæ‹–é€²ä¾†ï¼';
            }
        }

        // Initialize draggable items
        document.getElementById('drag-item1').addEventListener('dragstart', drag);
        document.getElementById('drag-item2').addEventListener('dragstart', drag);


        // Type 2: Calculation Fill-in-the-blank
        function checkFillInAnswer(qId, correctNum, correctDen, simplify=false, mixed=false) {
            const numInput = document.getElementById(`q${qId}-num`);
            const denInput = document.getElementById(`q${qId}-den`);
            const feedbackDiv = document.getElementById(`feedback-q${qId}`);

            let userNum = parseInt(numInput.value);
            let userDen = parseInt(denInput.value);

            if (isNaN(userNum) || isNaN(userDen)) {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'è«‹å¡«å¯«å®Œæ•´çš„æ•¸å­—å–”ï¼';
                return;
            }

            let isCorrect = false;
            if (mixed) {
                // For 3/4 + 2/4 = 5/4 = 1åˆ1/4
                // CorrectNum and CorrectDen for mixed fraction (whole number, new numerator, denominator)
                const correctWhole = correctNum; // 1
                const correctMixedNum = correctDen; // 1
                const correctMixedDen = 4; // 4
                
                const currentFraction = userNum / userDen;
                const expectedFraction = (correctWhole * correctMixedDen + correctMixedNum) / correctMixedDen;

                if (currentFraction === expectedFraction && userDen === correctMixedDen) {
                    isCorrect = true; // Simpler check for now, needs refinement for mixed input
                }
                // A more robust check would involve parsing input "1" "1" "4" vs "5" "4"
                // For now, let's assume direct input for the mixed fraction's parts.
                // Re-evaluate what (correctNum, correctDen) means for mixed. Let's make it (whole, numerator, denominator)
                // For q3: 3/4 + 2/4 = 5/4 -> 1åˆ1/4. So correctNum=1, correctDen=4 (assuming 1/4 is the fraction part)
                // Let's adjust parameters to be (qId, correctWhole, correctNum, correctDen, mixed)
                // New call: checkFillInAnswer(3, 1, 1, 4, true)
            } else {
                // For simple fractions, check if user input is equivalent
                // Find GCD to simplify both user and correct fractions
                const gcd = (a, b) => (b === 0 ? a : gcd(b, a % b));
                const userGcd = gcd(userNum, userDen);
                const correctGcd = gcd(correctNum, correctDen);

                isCorrect = (userNum / userGcd === correctNum / correctGcd) && (userDen / userGcd === correctDen / correctGcd);
            }


            if (isCorrect) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.textContent = 'æ­å–œä½ ï¼Œç­”å°äº†ï¼';
                if (!questionsAttempted[`q${qId}-fill`]) {
                    questionsAttempted[`q${qId}-fill`] = true;
                    updateProgressBar();
                }
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'å†è©¦ä¸€æ¬¡ï¼Œç­”æ¡ˆå¯èƒ½éœ€è¦åŒ–ç°¡å–”ï¼';
            }
        }

        // Re-adjust checkFillInAnswer for Q3 to handle mixed fraction input
        // Current: checkFillInAnswer(3, 1, 4, true, true) -> assumes 1 is correctNum, 4 is correctDen, which is actually 1/4.
        // It should be (qId, expectedWhole, expectedNumerator, expectedDenominator, isMixed)
        function checkFillInAnswerForQ3(qId, expectedWhole, expectedNumerator, expectedDenominator) {
            const numInput = document.getElementById(`q${qId}-num`); // This will be the WHOLE number if user inputs mixed
            const denInput = document.getElementById(`q${qId}-den`); // This will be the NUMERATOR if user inputs mixed
            const feedbackDiv = document.getElementById(`feedback-q${qId}`);

            let userWhole = parseInt(numInput.value); // Assume whole input
            let userNumerator = parseInt(denInput.value); // Assume numerator input
            let userDenominator = 4; // Hardcoded for this specific problem (3/4 + 2/4 = 5/4 = 1åˆ1/4)

            if (isNaN(userWhole) || isNaN(userNumerator)) {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'è«‹å¡«å¯«å®Œæ•´çš„æ•¸å­—å–”ï¼';
                return;
            }

            // Correct answer for 3/4 + 2/4 = 5/4 = 1åˆ1/4
            // So expectedWhole = 1, expectedNumerator = 1, expectedDenominator = 4
            let isCorrect = (userWhole === expectedWhole && userNumerator === expectedNumerator && userDenominator === expectedDenominator);

            // Also allow input as improper fraction 5/4
            if (userWhole === 5 && userNumerator === 4 && userDenominator === 4) { // This condition checks 5/4 directly
                isCorrect = true;
            }


            if (isCorrect) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.textContent = 'ç­”å°äº†ï¼çœŸå²å®³ï¼';
                if (!questionsAttempted[`q${qId}-fill`]) {
                    questionsAttempted[`q${qId}-fill`] = true;
                    updateProgressBar();
                }
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'å†è©¦ä¸€æ¬¡ï¼Œæ˜¯ä¸æ˜¯å¿˜äº†åŒ–ç‚ºå¸¶åˆ†æ•¸äº†å‘¢ï¼Ÿæˆ–è€…å¯ä»¥å¯«æˆå‡åˆ†æ•¸å–”ï¼';
            }
        }
        // Update the call for q3:
        // onclick="checkFillInAnswer(3, 1, 4, true, true)" -> will be checkFillInAnswerForQ3(3, 1, 1)

        // Type 3: Multiple Choice
        function checkMultipleChoiceAnswer(qId, correctAnswer) {
            const options = document.querySelectorAll(`#q${qId}-options input[name="q${qId}"]`);
            const feedbackDiv = document.getElementById(`feedback-q${qId}`);
            let userAnswer = '';
            options.forEach(option => {
                if (option.checked) {
                    userAnswer = option.value;
                }
            });

            if (userAnswer === '') {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'è«‹é¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼';
                return;
            }

            if (userAnswer === correctAnswer) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.textContent = 'ç­”å°äº†ï¼å¤ªæ£’äº†ï¼';
                if (!questionsAttempted[`q${qId}-mc`]) {
                    questionsAttempted[`q${qId}-mc`] = true;
                    updateProgressBar();
                }
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'å“å‘€ï¼Œå†ä»”ç´°ç®—ç®—çœ‹å–”ï¼';
            }
        }

        // Section 4: Application Problems
        function showHint(qId) {
            const hintDiv = document.getElementById(`hint${qId}`);
            if (hintDiv.style.display === 'none') {
                hintDiv.style.display = 'block';
            } else {
                hintDiv.style.display = 'none';
            }
        }

        function checkApplicationAnswer(qId, correctVal1, correctVal2 = null) {
            const feedbackDiv = document.getElementById(`feedback-app-q${qId}`);
            let isCorrect = false;

            if (qId === 1) { // Fraction answer for apple pie
                const numInput = document.getElementById('app-q1-num');
                const denInput = document.getElementById('app-q1-den');
                const userNum = parseInt(numInput.value);
                const userDen = parseInt(denInput.value);

                if (isNaN(userNum) || isNaN(userDen)) {
                    feedbackDiv.className = 'feedback incorrect';
                    feedbackDiv.textContent = 'è«‹å¡«å¯«å®Œæ•´çš„æ•¸å­—å–”ï¼';
                    return;
                }
                
                // For 2/8 + 3/8 = 5/8
                // We'll accept 5/8 directly, no simplification required for 4th grade
                isCorrect = (userNum === correctVal1 && userDen === correctVal2);

            } else if (qId === 2) { // Whole number or mixed fraction for milk
                const ansInput = document.getElementById('app-q2-ans');
                const userAnswer = ansInput.value.trim();
                // For 1/2 + 1/2 = 2/2 = 1
                isCorrect = (userAnswer === correctVal1 || userAnswer === '2/2' || userAnswer === '1åˆ0/2'); // Allow "1", "2/2" or "1åˆ0/2"
            }

            if (isCorrect) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.textContent = 'å¤ªæ£’äº†ï¼ç”Ÿæ´»ä¸­çš„åˆ†æ•¸å•é¡Œä¹Ÿé›£ä¸å€’ä½ ï¼';
                if (!questionsAttempted[`app-q${qId}`]) {
                    questionsAttempted[`app-q${qId}`] = true;
                    updateProgressBar();
                }
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'å†æ€è€ƒä¸€ä¸‹é¡Œç›®çš„æ„æ€å–”ï¼';
            }
        }

        // Section 5: Improper to Mixed Fraction
        function playConversionAnimation() {
            alert('æ’­æ”¾å‡åˆ†æ•¸åŒ–å¸¶åˆ†æ•¸å‹•ç•«ï¼ (æ­¤ç‚ºç¤ºæ„åŠŸèƒ½)');
        }

        function checkMixedFraction(improperNum, improperDen, correctWhole, correctNum, correctDen) {
            const wholeInput = document.getElementById('mixed-whole');
            const numInput = document.getElementById('mixed-num');
            const denInput = document.getElementById('mixed-den');
            const feedbackDiv = document.getElementById('feedback-mixed');

            const userWhole = parseInt(wholeInput.value);
            const userNum = parseInt(numInput.value);
            const userDen = parseInt(denInput.value);

            if (isNaN(userWhole) || isNaN(userNum) || isNaN(userDen)) {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'è«‹å¡«å¯«å®Œæ•´çš„æ•¸å­—å–”ï¼';
                return;
            }

            let isCorrect = false;
            if (userWhole === correctWhole && userNum === correctNum && userDen === correctDen) {
                isCorrect = true;
            } else {
                // Also check if they input the original improper fraction (less likely for this section but good to cover)
                if (userWhole === improperNum && userNum === improperDen && userDen === improperDen) {
                     // This means they put 7 and 3/3 for 7/3, which is 7 + 1 = 8.
                     // Or they put 7 for whole, and 3/3 for fraction, which means 7 + 1 = 8
                    // This implies the input boxes for whole/numerator/denominator are very specific to mixed fraction form.
                    // For now, let's stick to strict mixed fraction check.
                }
            }


            if (isCorrect) {
                feedbackDiv.className = 'feedback correct';
                feedbackDiv.textContent = 'å¤ªå²å®³äº†ï¼ä½ å·²ç¶“æ˜¯åˆ†æ•¸è®Šèº«å¤§å¸«äº†ï¼';
                if (!questionsAttempted['challenge-mixed']) {
                    questionsAttempted['challenge-mixed'] = true;
                    updateProgressBar();
                }
            } else {
                feedbackDiv.className = 'feedback incorrect';
                feedbackDiv.textContent = 'å†æƒ³æƒ³çœ‹ï¼Œå‡åˆ†æ•¸æ€éº¼è®Šèº«å‘¢ï¼Ÿæç¤ºï¼šç”¨åˆ†å­é™¤ä»¥åˆ†æ¯ï¼';
            }
        }

        // Initial progress bar update on load
        document.addEventListener('DOMContentLoaded', () => {
            updateProgressBar();
            // Attach specific function calls to elements after DOM is loaded
            document.querySelector('#q3-num').parentNode.querySelector('.btn').onclick = () => checkFillInAnswerForQ3(3, 1, 1);
        });

    </script>
</body>
</html>
```