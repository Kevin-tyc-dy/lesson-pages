```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¶å¯å¤¢ï¼šçš®å¡ä¸˜çš„æ•¸å­¸å†’éšª - åŒåˆ†æ¯åˆ†æ•¸åŠ æ¸›</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* å…¨å±€CSSè®Šæ•¸ - çš®å¡ä¸˜ä¸»é¡Œè‰² */
        :root {
            --pikachu-yellow: #FFD700; /* äº®é»ƒè‰² */
            --pikachu-red: #DC143C; /* æ·±ç´…è‰² (è‡‰é °ã€å°¾å·´) */
            --pikachu-black: #222222; /* é»‘è‰² (çœ¼ç›ã€å°¾å·´å°–) */
            --pikachu-white: #FFFFFF; /* ç™½è‰² */
            --pikachu-light-gray: #F0F0F0; /* èƒŒæ™¯è¼”åŠ©è‰² */
            --text-dark: #333333;
        }

        /* åŸºæœ¬é‡è¨­èˆ‡å­—é«” */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            color: var(--text-dark);
            background-color: var(--pikachu-light-gray);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        h1, h2, h3, h4 {
            font-family: 'Fredoka', cursive;
            color: var(--pikachu-red);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        h1 { font-size: 3.5em; }
        h2 { font-size: 2.5em; }
        h3 { font-size: 1.8em; }

        a {
            color: var(--pikachu-red);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        a:hover {
            color: var(--pikachu-yellow);
        }

        /* å®¹å™¨èˆ‡ä½ˆå±€ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .pokemon-section {
            padding: 80px 20px;
            margin-bottom: 40px;
            background-color: var(--pikachu-white);
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden; /* é˜²æ­¢èƒŒæ™¯åœ–æº¢å‡º */
        }
        .pokemon-section:nth-child(even) {
            background-color: var(--pikachu-light-gray);
        }

        /* æ¨™é¡Œå€å¡Š */
        header {
            background: linear-gradient(45deg, var(--pikachu-red), var(--pikachu-yellow));
            color: var(--pikachu-white);
            padding: 30px 20px;
            text-align: center;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        header h1 {
            color: var(--pikachu-white);
            text-shadow: 3px 3px 5px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }
        header p {
            font-size: 1.2em;
            font-family: 'Fredoka', cursive;
            opacity: 0.9;
        }

        /* ä»‹ç´¹å€å¡Š - çš®å¡ä¸˜ç™»å ´ */
        #intro {
            text-align: center;
            background-color: var(--pikachu-yellow);
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/25.svg'); /* çš®å¡ä¸˜å‰ªå½± */
            background-repeat: no-repeat;
            background-position: right 20px bottom 20px;
            background-size: 200px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--pikachu-black);
        }
        .intro-content {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 30px 50px;
            border-radius: 15px;
            max-width: 800px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            animation: bounceIn 1s ease-out;
        }
        #intro h2 {
            color: var(--pikachu-red);
            font-size: 3em;
            margin-bottom: 20px;
        }
        #intro .pikachu-greeting {
            width: 150px;
            height: 150px;
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png'); /* çš®å¡ä¸˜æ­£é¢åœ– */
            background-size: contain;
            background-repeat: no-repeat;
            margin: 0 auto 20px;
            animation: pikachuBounce 1s infinite alternate;
        }
        #intro p {
            font-size: 1.3em;
            margin-bottom: 20px;
        }
        .start-button {
            background-color: var(--pikachu-red);
            color: var(--pikachu-white);
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-size: 1.5em;
            font-family: 'Fredoka', cursive;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .start-button:hover {
            background-color: var(--pikachu-black);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }

        /* æ ¸å¿ƒæ¦‚å¿µä»‹ç´¹ */
        #concepts {
            text-align: center;
            background-color: var(--pikachu-white);
        }
        #concepts h2 {
            margin-bottom: 40px;
            color: var(--pikachu-red);
        }
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            text-align: left;
        }
        .concept-card {
            background-color: var(--pikachu-light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }
        .concept-card:hover {
            transform: translateY(-5px);
        }
        .concept-card h3 {
            color: var(--pikachu-black);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .concept-card h3 img {
            width: 40px;
            height: 40px;
        }
        .fraction-example {
            display: flex;
            align-items: center;
            margin-top: 20px;
            gap: 15px;
        }
        .fraction-visual {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #EEE;
            border: 3px solid var(--pikachu-red);
            position: relative;
            overflow: hidden;
        }
        .fraction-visual .segment {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--pikachu-red); /* Representing the 'eaten' part */
            opacity: 0.7;
            clip-path: polygon(50% 50%, 50% 0%, /* Start point */ 100% 0%, 100% 100%, 0% 100%, 0% 0%); /* Full circle */
        }
        /* Example: 1/4 */
        .fraction-visual.one-quarter .segment {
            clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 75% 50%, 75% 0%, 50% 0%); /* Top right quarter */
            clip-path: polygon(50% 50%, 100% 50%, 100% 0%, 50% 0%); /* Top right quarter for 1/4 */
        }
        /* Example: 2/4 */
        .fraction-visual.two-quarters .segment {
            clip-path: polygon(50% 50%, 100% 50%, 100% 0%, 50% 0%, 0% 0%, 0% 50%, 50% 50%); /* Top right and top left */
            clip-path: polygon(50% 50%, 100% 50%, 100% 0%, 0% 0%, 0% 50%, 50% 50%); /* For 2/4 (half) */
            clip-path: polygon(50% 50%, 100% 50%, 100% 0%, 50% 0%, 50% 0%, 0% 0%, 0% 50%, 50% 50%);
            clip-path: polygon(50% 50%, 100% 50%, 100% 0%, 0% 0%, 0% 50%, 50% 50%); /* Half circle (2/4) */
            clip-path: polygon(50% 50%, 50% 0%, 0% 0%, 0% 50%, 50% 50%, 100% 50%, 100% 0%, 50% 0%);
            clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 50% 50%, 0% 50%, 0% 0%, 50% 0%);
            clip-path: polygon(50% 50%, 50% 0%, 0% 0%, 0% 50%, 50% 50%); /* Left half */
            clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%, 50% 50%); /* Right half */
            clip-path: polygon(50% 0%, 100% 0%, 100% 50%, 50% 50%, 0% 50%, 0% 0%); /* top half */
        }
        /* Visuals for 1/4 and 2/4 for example pizza/cake */
        .pizza-slice-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        .pizza-slice {
            width: 100px;
            height: 100px;
            background-color: #f7d24f; /* Pizza color */
            border: 2px solid #e08e0b;
            clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 50%); /* 1/4 slice */
            transform-origin: 50% 50%;
            margin: -2px; /* to make them stick together */
        }
        .pizza-slice.eaten {
            background-color: var(--pikachu-red);
            opacity: 0.8;
        }
        .fraction-number {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--pikachu-black);
            margin: 0 10px;
        }
        .fraction-explanation {
            font-size: 1.1em;
            margin-top: 10px;
        }
        .common-denominator-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
            background-color: var(--pikachu-yellow);
            padding: 20px;
            border-radius: 10px;
        }
        .common-denominator-visual .item-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        .common-denominator-visual .item {
            width: 60px;
            height: 60px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 5px;
        }
        .item.pokeball {
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png');
            background-color: var(--pikachu-red);
        }
        .item.energy {
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/energy-powder.png');
            background-color: var(--pikachu-white);
        }
        .equal-sign {
            font-size: 2em;
            font-weight: bold;
            color: var(--pikachu-red);
        }

        /* ç·´ç¿’å€å¡Šå…±ç”¨æ¨£å¼ */
        .practice-area {
            text-align: center;
        }
        .practice-area h2 {
            margin-bottom: 40px;
        }
        .question-card {
            background-color: var(--pikachu-white);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .question-text {
            font-size: 1.5em;
            margin-bottom: 25px;
            color: var(--pikachu-black);
            font-family: 'Fredoka', cursive;
        }
        .fraction-problem {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .fraction-input-group {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 2em;
            font-weight: bold;
        }
        .fraction-input {
            width: 80px;
            height: 50px;
            font-size: 1.5em;
            text-align: center;
            border: 2px solid var(--pikachu-red);
            border-radius: 10px;
            font-family: 'Fredoka', cursive;
        }
        .fraction-line {
            width: 60px;
            height: 3px;
            background-color: var(--text-dark);
            margin: 0 5px;
        }
        .visual-drag-area {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background-color: var(--pikachu-light-gray);
            padding: 15px;
            border-radius: 10px;
            border: 2px dashed var(--pikachu-red);
            min-height: 120px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }
        .draggable-item {
            width: 80px;
            height: 80px;
            background-color: var(--pikachu-yellow);
            border: 2px solid var(--pikachu-red);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2em;
            font-weight: bold;
            cursor: grab;
            transition: transform 0.2s ease;
            position: relative;
        }
        .draggable-item.energy-block {
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/energy-root.png');
            background-size: 70%;
            background-repeat: no-repeat;
            background-position: center;
        }
        .draggable-item:active {
            cursor: grabbing;
            transform: scale(1.05);
        }
        .check-button {
            background-color: var(--pikachu-red);
            color: var(--pikachu-white);
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            font-family: 'Fredoka', cursive;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
            margin-top: 20px;
        }
        .check-button:hover {
            background-color: var(--pikachu-black);
            transform: translateY(-2px);
        }
        .feedback-message {
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
            min-height: 30px;
        }
        .feedback-message.correct { color: green; }
        .feedback-message.wrong { color: var(--pikachu-red); }

        .pikachu-feedback-animation {
            width: 100px;
            height: 100px;
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png'); /* é è¨­çš®å¡ä¸˜ */
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            margin: 10px auto;
        }
        .pikachu-feedback-animation.happy {
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/shiny/25.png'); /* é–ƒå…‰çš®å¡ä¸˜ç‚ºé–‹å¿ƒ */
        }
        .pikachu-feedback-animation.thinking {
            /* å‡è¨­é€™è£¡æ˜¯ä¸€å€‹æ€è€ƒä¸­çš„çš®å¡ä¸˜åœ– */
            background-image: url('https://archives.bulbagarden.net/media/upload/b/b3/Pikachu_ash.gif'); /* æ€è€ƒå‹•ç•« */
        }
        .pikachu-feedback-animation.sad {
            /* å‡è¨­é€™è£¡æ˜¯ä¸€å€‹é›£éçš„çš®å¡ä¸˜åœ– */
            background-image: url('https://cdn.bulbagarden.net/upload/e/e4/Pikachu_OS_anime.png'); /* é›£éåœ– (éæ­£å¼ï¼Œåƒ…ç‚ºç¤ºæ„) */
        }

        /* ç¶œåˆç·´ç¿’èˆ‡é—–é—œæ©Ÿåˆ¶ */
        #challenge .challenge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .challenge-card {
            background-color: var(--pikachu-yellow);
            color: var(--pikachu-black);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: relative;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .challenge-card.locked {
            background-color: #CCC;
            filter: grayscale(80%);
            cursor: not-allowed;
        }
        .challenge-card.unlocked {
            background-color: var(--pikachu-yellow);
            cursor: pointer;
        }
        .challenge-card .lock-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 2em;
            color: var(--pikachu-black);
        }
        .challenge-card h3 {
            color: var(--pikachu-black);
            margin-bottom: 15px;
            font-size: 1.6em;
        }
        .challenge-card p {
            font-size: 1.1em;
            margin-bottom: 20px;
        }
        .badge-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        .badge {
            width: 80px;
            height: 80px;
            background-color: var(--pikachu-light-gray);
            border: 3px solid var(--pikachu-red);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            color: var(--pikachu-black);
            font-family: 'Fredoka', cursive;
            opacity: 0.5;
            filter: grayscale(100%);
            transition: all 0.5s ease;
        }
        .badge.unlocked-badge {
            opacity: 1;
            filter: grayscale(0%);
            background-color: var(--pikachu-red);
            color: var(--pikachu-white);
            transform: scale(1.1) rotate(10deg);
        }

        /* é‡é»æç¤ºèˆ‡éŒ¯èª¤åˆ†æ */
        #tips-feedback {
            background-color: var(--pikachu-white);
        }
        #tips-feedback h2 {
            margin-bottom: 40px;
        }
        .tip-card {
            background-color: var(--pikachu-light-gray);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .tip-card .pikachu-icon {
            width: 80px;
            height: 80px;
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
        }
        .tip-card h3 {
            color: var(--pikachu-black);
            margin-bottom: 10px;
        }
        .tip-card p {
            font-size: 1.1em;
        }

        /* å­¸ç¿’æˆæœå±•ç¤º */
        #results {
            text-align: center;
            background: linear-gradient(135deg, var(--pikachu-yellow), var(--pikachu-red));
            color: var(--pikachu-white);
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #results h2 {
            color: var(--pikachu-white);
            text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        .certificate-container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 40px 60px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            color: var(--pikachu-black);
            max-width: 700px;
            width: 100%;
            position: relative;
            border: 5px dashed var(--pikachu-red);
        }
        .certificate-container::before {
            content: "ğŸ…";
            position: absolute;
            top: -20px;
            left: -20px;
            font-size: 60px;
            transform: rotate(-20deg);
        }
        .certificate-container::after {
            content: "ğŸ†";
            position: absolute;
            bottom: -20px;
            right: -20px;
            font-size: 60px;
            transform: rotate(20deg);
        }
        .certificate-header {
            font-family: 'Fredoka', cursive;
            color: var(--pikachu-red);
            font-size: 2.5em;
            margin-bottom: 20px;
            text-align: center;
        }
        .certificate-body p {
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        .certificate-body .student-name {
            font-size: 2em;
            font-weight: bold;
            color: var(--pikachu-black);
            margin: 15px 0;
            display: block;
        }
        .certificate-body .grade-level {
            font-size: 1.1em;
            color: #666;
        }
        .certificate-footer {
            margin-top: 30px;
            font-size: 1em;
            color: #777;
            border-top: 1px solid #CCC;
            padding-top: 15px;
        }
        .certificate-footer img {
            width: 60px;
            height: 60px;
            vertical-align: middle;
            margin-left: 10px;
        }
        .pikachu-cheer-results {
            width: 120px;
            height: 120px;
            background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/dream-world/25.svg'); /* å‹åˆ©çš®å¡ä¸˜ */
            background-size: contain;
            background-repeat: no-repeat;
            margin: 20px auto;
            animation: pikachuDance 1s infinite alternate;
        }
        
        /* é è…³ */
        footer {
            text-align: center;
            padding: 30px 20px;
            background-color: var(--pikachu-black);
            color: var(--pikachu-light-gray);
            font-size: 0.9em;
            margin-top: 50px;
        }
        footer a {
            color: var(--pikachu-yellow);
        }

        /* å‹•ç•« */
        @keyframes pikachuBounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-15px); }
        }
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.8); }
            60% { opacity: 1; transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes pikachuDance {
            0% { transform: rotate(-5deg); }
            100% { transform: rotate(5deg); }
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            h1 { font-size: 2.5em; }
            h2 { font-size: 2em; }
            h3 { font-size: 1.5em; }
            .intro-content { padding: 20px 30px; }
            #intro .pikachu-greeting { width: 100px; height: 100px; }
            .start-button { font-size: 1.2em; padding: 12px 25px; }
            .concept-grid { grid-template-columns: 1fr; }
            .fraction-input-group { flex-direction: column; gap: 0; }
            .fraction-input { width: 60px; height: 40px; font-size: 1.2em; }
            .fraction-line { width: 40px; margin: 5px 0; }
            .visual-drag-area { min-height: 90px; }
            .draggable-item { width: 60px; height: 60px; font-size: 1em; }
            .challenge-grid { grid-template-columns: 1fr; }
            .certificate-container { padding: 30px; }
            .certificate-header { font-size: 2em; }
            .certificate-body .student-name { font-size: 1.5em; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>å¯¶å¯å¤¢ï¼šçš®å¡ä¸˜çš„æ•¸å­¸å†’éšª</h1>
            <p>ä¸€èµ·ä¾†å­¸ç¿’åŒåˆ†æ¯åˆ†æ•¸åŠ æ¸›å§ï¼çš®å¡ï¼</p>
        </div>
    </header>

    <main>
        <!-- 1. é–‹é ­å‹•ç•«/æ’ç•« -->
        <section id="intro" class="pokemon-section">
            <div class="container intro-content">
                <div class="pikachu-greeting" aria-label="æ´»æ½‘çš„çš®å¡ä¸˜"></div>
                <h2>çš®å¡çš®å¡ï¼æ­¡è¿ä¾†åˆ°æ•¸å­¸å†’éšªï¼</h2>
                <p>æˆ‘æ˜¯çš®å¡ä¸˜ï¼æº–å‚™å¥½è·Ÿæˆ‘ä¸€èµ·æ¢ç´¢åˆ†æ•¸çš„ä¸–ç•Œäº†å—ï¼Ÿ</p>
                <p>é€™æ¬¡æˆ‘å€‘è¦å­¸ç¿’åŒåˆ†æ¯åˆ†æ•¸çš„åŠ æ³•å’Œæ¸›æ³•å–”ï¼</p>
                <button class="start-button" onclick="scrollToSection('concepts')">é–‹å§‹å†’éšªï¼</button>
            </div>
        </section>

        <!-- 2. æ ¸å¿ƒæ¦‚å¿µä»‹ç´¹ -->
        <section id="concepts" class="pokemon-section">
            <div class="container">
                <h2>çš®å¡ä¸˜æ•™ä½ èªè­˜åˆ†æ•¸ï¼</h2>
                <div class="concept-grid">
                    <div class="concept-card">
                        <h3><img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png" alt="å¯¶è²çƒåœ–ç¤º"> åˆ†æ•¸æ˜¯ä»€éº¼ï¼Ÿ</h3>
                        <p>æƒ³åƒä¸€ä¸‹ï¼Œçš®å¡ä¸˜ä»Šå¤©æ‰¾åˆ°ä¸€é¡†å¤§å¤§çš„ç¥å¥‡ç³–æœï¼ä»–æƒ³æŠŠç³–æœåˆ†çµ¦4å€‹æœ‹å‹ã€‚</p>
                        <div class="pizza-slice-container">
                            <div class="pizza-slice eaten"></div>
                            <div class="pizza-slice"></div>
                            <div class="pizza-slice"></div>
                            <div class="pizza-slice"></div>
                        </div>
                        <p>é€™é¡†ç³–æœè¢«åˆ†æˆäº† <span class="fraction-number">4</span> ç­‰ä»½ï¼Œå¦‚æœçš®å¡ä¸˜åƒäº†å…¶ä¸­ <span class="fraction-number">1</span> ä»½ï¼Œå°±æ˜¯åƒäº† <span class="fraction-number">1/4</span> é¡†ç³–æœå–”ï¼</p>
                        <div class="fraction-explanation">
                            <p>ä¸‹é¢çš„æ•¸å­—æ˜¯<strong>åˆ†æ¯</strong>ï¼ˆä»£è¡¨ç¸½å…±åˆ†æˆå¹¾ä»½ï¼‰ã€‚</p>
                            <p>ä¸Šé¢çš„æ•¸å­—æ˜¯<strong>åˆ†å­</strong>ï¼ˆä»£è¡¨æ‹¿èµ°æˆ–çœ‹ä½œæ˜¯å¹¾ä»½ï¼‰ã€‚</p>
                        </div>
                    </div>
                    <div class="concept-card">
                        <h3><img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/energy-powder.png" alt="èƒ½é‡å¡Šåœ–ç¤º"> åŒåˆ†æ¯åˆ†æ•¸æ˜¯ä»€éº¼ï¼Ÿ</h3>
                        <p>ç•¶å¤§å®¶åˆ†åˆ°çš„æ±è¥¿ï¼Œç¸½å…±è¢«åˆ‡åˆ†çš„æ•¸é‡ä¸€æ¨£æ™‚ï¼Œå®ƒå€‘å°±æ˜¯ã€ŒåŒåˆ†æ¯ã€åˆ†æ•¸ï¼</p>
                        <div class="common-denominator-visual">
                            <div class="item-group">
                                <div class="item pokeball"></div>
                                <div class="item pokeball"></div>
                                <div class="item pokeball"></div>
                                <div class="item pokeball"></div>
                                <p>ç¸½å…±æœ‰ 4 é¡†å¯¶è²çƒ</p>
                            </div>
                            <span class="equal-sign">+</span>
                            <div class="item-group">
                                <div class="item pokeball"></div>
                                <div class="item pokeball"></div>
                                <p>ç¸½å…±æœ‰ 4 é¡†å¯¶è²çƒ</p>
                            </div>
                        </div>
                        <p>çš®å¡ä¸˜æ”¶é›†äº† 1/4 ç±ƒå¯¶è²çƒï¼Œåˆæ”¶é›†äº† 2/4 ç±ƒå¯¶è²çƒã€‚</p>
                        <p>å› ç‚ºç±ƒå­è£¡ç¸½å…±æœ‰ <span class="fraction-number">4</span> æ ¼ï¼ˆåˆ†æ¯ä¸€æ¨£ï¼‰ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥å¾ˆè¼•é¬†åœ°åŠ èµ·ä¾†ï¼</p>
                        <p><strong>ğŸ’¡ è¨˜ä½ï¼šåˆ†æ¯ä¸€æ¨£ï¼Œæ‰èƒ½ç›´æ¥åŠ æ¸›åˆ†å­å–”ï¼</strong></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. åŒåˆ†æ¯åˆ†æ•¸åŠ æ³•ç·´ç¿’å€ -->
        <section id="addition-practice" class="pokemon-section">
            <div class="container practice-area">
                <h2>âš¡ çš®å¡ä¸˜çš„é›»æ± åŠ æ³•ç‰¹è¨“ï¼ âš¡</h2>
                <div class="question-card" id="q_add_1">
                    <p class="question-text">çš®å¡ä¸˜åƒäº† 1/4 å¡Šé›»æ± ï¼Œåˆåƒäº† 2/4 å¡Šé›»æ± ï¼Œç¸½å…±åƒäº†å¹¾å¡Šé›»æ± ï¼Ÿ</p>
                    <div class="fraction-problem">
                        <span class="fraction-number">1/4</span>
                        <span class="equal-sign">+</span>
                        <span class="fraction-number">2/4</span>
                        <span class="equal-sign">=</span>
                        <div class="fraction-input-group">
                            <input type="number" class="fraction-input numerator-input" id="add1_num" placeholder="?" min="0" max="10">
                            <div class="fraction-line"></div>
                            <span class="fraction-number denominator-display">4</span>
                        </div>
                    </div>
                    <div class="visual-drag-area" id="drag_add_1">
                        <!-- å¯æ‹–æ›³çš„é›»æ± èƒ½é‡å¡Š -->
                        <div class="draggable-item energy-block" draggable="true" data-value="1"></div>
                        <div class="draggable-item energy-block" draggable="true" data-value="1"></div>
                        <div class="draggable-item energy-block" draggable="true" data-value="1"></div>
                        <!-- ç›®æ¨™æ”¾ç½®å€ -->
                        <div class="draggable-drop-target" style="width: 200px; height: 80px; border: 2px dashed #AAA; border-radius: 10px; display: flex; align-items: center; justify-content: center;">æ‹–æ›³é›»æ± åˆ°é€™è£¡</div>
                    </div>
                    <button class="check-button" onclick="checkAdditionAnswer(1)">çš®å¡ï¼æª¢æŸ¥ç­”æ¡ˆ</button>
                    <p class="feedback-message" id="add1_feedback"></p>
                    <div class="pikachu-feedback-animation" id="add1_pikachu"></div>
                </div>

                <div class="question-card" id="q_add_2">
                    <p class="question-text">å°ç«é¾åƒäº† 3/5 ç›¤æ¨¹æœï¼Œå‚‘å°¼é¾œåƒäº† 1/5 ç›¤æ¨¹æœï¼Œä»–å€‘ç¸½å…±åƒäº†å¹¾ç›¤æ¨¹æœï¼Ÿ</p>
                    <div class="fraction-problem">
                        <span class="fraction-number">3/5</span>
                        <span class="equal-sign">+</span>
                        <span class="fraction-number">1/5</span>
                        <span class="equal-sign">=</span>
                        <div class="fraction-input-group">
                            <input type="number" class="fraction-input numerator-input" id="add2_num" placeholder="?" min="0" max="10">
                            <div class="fraction-line"></div>
                            <span class="fraction-number denominator-display">5</span>
                        </div>
                    </div>
                    <button class="check-button" onclick="checkAdditionAnswer(2)">çš®å¡ï¼æª¢æŸ¥ç­”æ¡ˆ</button>
                    <p class="feedback-message" id="add2_feedback"></p>
                    <div class="pikachu-feedback-animation" id="add2_pikachu"></div>
                </div>
            </div>
        </section>

        <!-- 4. åŒåˆ†æ¯åˆ†æ•¸æ¸›æ³•ç·´ç¿’å€ -->
        <section id="subtraction-practice" class="pokemon-section">
            <div class="container practice-area">
                <h2>ğŸ’§ çš®å¡ä¸˜çš„èƒ½é‡é£²æ–™æ¸›æ³•æŒ‘æˆ°ï¼ ğŸ’§</h2>
                <div class="question-card" id="q_sub_1">
                    <p class="question-text">çš®å¡ä¸˜æœ‰ 5/8 ç“¶èƒ½é‡é£²æ–™ï¼Œå–æ‰äº† 2/8 ç“¶ï¼Œé‚„å‰©ä¸‹å¹¾ç“¶ï¼Ÿ</p>
                    <div class="fraction-problem">
                        <span class="fraction-number">5/8</span>
                        <span class="equal-sign">-</span>
                        <span class="fraction-number">2/8</span>
                        <span class="equal-sign">=</span>
                        <div class="fraction-input-group">
                            <input type="number" class="fraction-input numerator-input" id="sub1_num" placeholder="?" min="0" max="10">
                            <div class="fraction-line"></div>
                            <span class="fraction-number denominator-display">8</span>
                        </div>
                    </div>
                    <div class="visual-drag-area" id="drag_sub_1">
                        <!-- 5/8 ç“¶èƒ½é‡é£²æ–™çš„è¦–è¦ºåŒ–ï¼Œå­¸ç”Ÿå¯ä»¥é»æ“Šç§»é™¤ -->
                        <div class="draggable-item energy-block removable" data-value="1" onclick="removeEnergy(this)"></div>
                        <div class="draggable-item energy-block removable" data-value="1" onclick="removeEnergy(this)"></div>
                        <div class="draggable-item energy-block removable" data-value="1" onclick="removeEnergy(this)"></div>
                        <div class="draggable-item energy-block removable" data-value="1" onclick="removeEnergy(this)"></div>
                        <div class="draggable-item energy-block removable" data-value="1" onclick="removeEnergy(this)"></div>
                        <div class="draggable-item energy-block empty" data-value="0"></div>
                        <div class="draggable-item energy-block empty" data-value="0"></div>
                        <div class="draggable-item energy-block empty" data-value="0"></div>
                    </div>
                    <button class="check-button" onclick="checkSubtractionAnswer(1)">çš®å¡ï¼æª¢æŸ¥ç­”æ¡ˆ</button>
                    <p class="feedback-message" id="sub1_feedback"></p>
                    <div class="pikachu-feedback-animation" id="sub1_pikachu"></div>
                </div>

                <div class="question-card" id="q_sub_2">
                    <p class="question-text">å¦™è›™ç¨®å­æœ‰ 7/10 ç›†æ³¥åœŸï¼Œç”¨æ‰äº† 3/10 ç›†å»ç¨®èŠ±ï¼Œé‚„å‰©ä¸‹å¹¾ç›†æ³¥åœŸï¼Ÿ</p>
                    <div class="fraction-problem">
                        <span class="fraction-number">7/10</span>
                        <span class="equal-sign">-</span>
                        <span class="fraction-number">3/10</span>
                        <span class="equal-sign">=</span>
                        <div class="fraction-input-group">
                            <input type="number" class="fraction-input numerator-input" id="sub2_num" placeholder="?" min="0" max="10">
                            <div class="fraction-line"></div>
                            <span class="fraction-number denominator-display">10</span>
                        </div>
                    </div>
                    <button class="check-button" onclick="checkSubtractionAnswer(2)">çš®å¡ï¼æª¢æŸ¥ç­”æ¡ˆ</button>
                    <p class="feedback-message" id="sub2_feedback"></p>
                    <div class="pikachu-feedback-animation" id="sub2_pikachu"></div>
                </div>
            </div>
        </section>

        <!-- 5. ç¶œåˆç·´ç¿’èˆ‡é—–é—œæ©Ÿåˆ¶ -->
        <section id="challenge" class="pokemon-section">
            <div class="container practice-area">
                <h2>ğŸ† æ•¸å­¸è¨“ç·´å¸«æŒ‘æˆ°ï¼ ğŸ†</h2>
                <p>å®Œæˆæ‰€æœ‰æŒ‘æˆ°ï¼Œè§£é–çš®å¡ä¸˜çš„ç‰¹æ®ŠæŠ€èƒ½å‹•ç•«ä¸¦ç²å¾—è™›æ“¬å¾½ç« ï¼</p>
                <div class="challenge-grid">
                    <div class="challenge-card unlocked" data-challenge-id="1">
                        <span class="lock-icon">âœ…</span>
                        <h3>æŒ‘æˆ°ä¸€ï¼šé‡é¤æ™‚é–“</h3>
                        <p>çš®å¡ä¸˜å’Œä»–çš„æœ‹å‹å€‘ä¸€èµ·é‡é¤ï¼Œä»–å€‘åƒäº† 2/6 çš„ä¸‰æ˜æ²»ï¼Œåˆåƒäº† 3/6 çš„ä¸‰æ˜æ²»ï¼Œç¸½å…±åƒäº†å¹¾åˆ†ä¹‹å¹¾ï¼Ÿ</p>
                        <p class="fraction-number">2/6 + 3/6 = <span class="challenge-answer" id="challenge1_ans">?</span></p>
                        <button class="check-button" onclick="openChallengeModal(1)">é–‹å§‹æŒ‘æˆ°</button>
                    </div>
                    <div class="challenge-card locked" data-challenge-id="2">
                        <span class="lock-icon">ğŸ”’</span>
                        <h3>æŒ‘æˆ°äºŒï¼šå°‹æ‰¾å¯¶è—</h3>
                        <p>å°æ™ºåœ¨å°‹å¯¶è·¯ä¸Šèµ°äº† 8/9 çš„è·¯ç¨‹ï¼Œä½†é‡åˆ°éšœç¤™é€€å›äº† 3/9 çš„è·¯ç¨‹ï¼Œä»–ç¾åœ¨åœ¨å“ªè£¡ï¼Ÿ</p>
                        <p class="fraction-number">8/9 - 3/9 = <span class="challenge-answer" id="challenge2_ans">?</span></p>
                        <button class="check-button" onclick="openChallengeModal(2)" disabled>æŒ‘æˆ°æœªè§£é–</button>
                    </div>
                    <div class="challenge-card locked" data-challenge-id="3">
                        <span class="lock-icon">ğŸ”’</span>
                        <h3>æŒ‘æˆ°ä¸‰ï¼šèƒ½é‡è£œçµ¦</h3>
                        <p>çš®å¡ä¸˜æœ‰ 1/10 ç“¶èƒ½é‡åŠ‘ï¼Œå°æ™ºåˆçµ¦äº†ä»– 5/10 ç“¶ï¼Œä½†ä»–æˆ°é¬¥ä¸­ç”¨æ‰äº† 2/10 ç“¶ï¼Œè«‹å•é‚„å‰©ä¸‹å¤šå°‘èƒ½é‡åŠ‘ï¼Ÿ</p>
                        <p class="fraction-number">1/10 + 5/10 - 2/10 = <span class="challenge-answer" id="challenge3_ans">?</span></p>
                        <button class="check-button" onclick="openChallengeModal(3)" disabled>æŒ‘æˆ°æœªè§£é–</button>
                    </div>
                </div>
                <h3>æˆ‘çš„æ•¸å­¸å¾½ç« </h3>
                <div class="badge-display">
                    <div class="badge" id="badge1">1</div>
                    <div class="badge" id="badge2">2</div>
                    <div class="badge" id="badge3">3</div>
                </div>
                <div class="pikachu-feedback-animation" id="challenge_pikachu"></div>
            </div>
        </section>

        <!-- 6. é‡é»æç¤ºèˆ‡éŒ¯èª¤åˆ†æ -->
        <section id="tips-feedback" class="pokemon-section">
            <div class="container">
                <h2>ğŸ’¡ çš®å¡ä¸˜çš„å°æç¤ºï¼åˆ¥æéŒ¯å›‰ï¼ ğŸ’¡</h2>
                <div class="tip-card">
                    <div class="pikachu-icon"></div>
                    <div>
                        <h3>åˆ†æ¯ä¸è®Šï¼</h3>
                        <p>åœ¨åŒåˆ†æ¯åˆ†æ•¸åŠ æ¸›ä¸­ï¼Œ<strong>åˆ†æ¯ï¼ˆä¸‹é¢çš„æ•¸å­—ï¼‰æ°¸é ä¸æœƒæ”¹è®Š</strong>ï¼å®ƒä»£è¡¨äº†æ•´é«”è¢«åˆ†æˆå¤šå°‘ä»½ï¼Œé€™å€‹ã€Œä»½æ•¸ã€æ˜¯ä¸æœƒå› ç‚ºåŠ æ¸›è€Œè®Šçš„ã€‚</p>
                        <p>ä¾‹å¦‚ï¼š1/4 + 2/4 = 3/4ï¼Œåˆ†æ¯é‚„æ˜¯ 4ã€‚</p>
                    </div>
                </div>
                <div class="tip-card">
                    <div class="pikachu-icon pikachu-feedback-animation thinking"></div>
                    <div>
                        <h3>åªç®—åˆ†å­ï¼</h3>
                        <p>ä½ åªéœ€è¦æŠŠ<strong>åˆ†å­ï¼ˆä¸Šé¢çš„æ•¸å­—ï¼‰ç›´æ¥ç›¸åŠ æˆ–ç›¸æ¸›</strong>å°±å¯ä»¥äº†ï¼å°±åƒæ•¸å¯¶è²çƒçš„æ•¸é‡ä¸€æ¨£ç°¡å–®ã€‚</p>
                        <p>ä¾‹å¦‚ï¼š5/8 - 2/8 = (5-2)/8 = 3/8ã€‚</p>
                    </div>
                </div>
                <div class="tip-card">
                    <div class="pikachu-icon pikachu-feedback-animation sad"></div>
                    <div>
                        <h3>å¸¸è¦‹éŒ¯èª¤ï¼šåˆ†å­åˆ†æ¯éƒ½åŠ æ¸›äº†ï¼</h3>
                        <p>æœ‰äº›è¨“ç·´å¸«æœƒä¸å°å¿ƒæŠŠåˆ†æ¯ä¹ŸåŠ èµ·ä¾†æˆ–æ¸›æ‰ã€‚é€™æ˜¯ä¸å°çš„å–”ï¼è¨˜ä½ï¼š<strong>åˆ†æ¯ä¸è®Šï¼</strong></p>
                        <p>éŒ¯èª¤ç¤ºç¯„ï¼š1/4 + 2/4 â‰  3/8</p>
                        <p>çš®å¡ä¸˜æœƒæé†’ä½ å¤šç·´ç¿’ï¼Œå¾ˆå¿«å°±èƒ½å­¸æœƒå›‰ï¼</p>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 30px; font-size: 1.2em;">éœ€è¦æ›´å¤šå¹«åŠ©å—ï¼Ÿå¯ä»¥åƒè€ƒé€™äº›å­¸ç¿’è³‡æºï¼š<a href="https://www.junyiacademy.org/math/grade-4/fractions-and-decimals/4-1-addition-and-subtraction-of-fractions/v/fraction-addition-subtraction-basics" target="_blank">å‡ä¸€æ•™è‚²å¹³å° - åˆ†æ•¸åŠ æ¸›åŸºç¤</a></p>
            </div>
        </section>

        <!-- 7. å­¸ç¿’æˆæœå±•ç¤º -->
        <section id="results" class="pokemon-section">
            <div class="container">
                <h2>ğŸ‰ æ­å–œä½ ï¼Œæ•¸å­¸è¨“ç·´å¸«ï¼ ğŸ‰</h2>
                <p>ä½ å®Œæˆäº†çš®å¡ä¸˜çš„æ•¸å­¸å†’éšªï¼ä¾†çœ‹çœ‹ä½ çš„å­¸ç¿’æˆæœå§ï¼</p>
                <div class="certificate-container">
                    <h3 class="certificate-header">çš®å¡ä¸˜æ•¸å­¸å†’éšªè­‰æ›¸</h3>
                    <div class="certificate-body">
                        <p>é€™ä»½è­‰æ›¸é ’ç™¼çµ¦å„ªç§€çš„æ•¸å­¸è¨“ç·´å¸«ï¼š</p>
                        <span class="student-name">Kevin</span>
                        <p>åœ¨ã€Œå¯¶å¯å¤¢ï¼šçš®å¡ä¸˜çš„æ•¸å­¸å†’éšªã€ä¸­ï¼Œä½ æˆåŠŸå­¸æœƒäº†åœ‹å°å››å¹´ç´šåŒåˆ†æ¯åˆ†æ•¸çš„åŠ æ¸›æ³•ï¼</p>
                        <p>ä½ çš„åŠªåŠ›å’Œå°ˆæ³¨å°±åƒçš®å¡ä¸˜çš„åè¬ä¼ç‰¹ä¸€æ¨£å¼·å¤§ï¼</p>
                        <p>ç¸½ç­”å°é¡Œæ•¸ï¼š<span id="correct_answers_count">0</span> / <span id="total_questions_count">0</span></p>
                        <p>æ­£ç¢ºç‡ï¼š<span id="accuracy_rate">0%</span></p>
                        <p class="grade-level">è¨“ç·´å¸«ç­‰ç´šï¼š<span id="trainer_rank">æ–°æ‰‹è¨“ç·´å¸«</span></p>
                    </div>
                    <div class="certificate-footer">
                        ç™¼è­‰æ—¥æœŸï¼š<span id="certificate_date">2026å¹´2æœˆ24æ—¥</span>
                        <br>
                        çš®å¡ä¸˜è¨“ç·´ç‡Ÿæ•¬ä¸Š <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png" alt="Pikachu" />
                    </div>
                </div>
                <div class="pikachu-cheer-results"></div>
                <p style="margin-top: 30px; font-size: 1.3em; font-family: 'Fredoka', cursive;">ã€Œçš®å¡ï¼å¤ªå²å®³äº†ï¼ä½ çœŸæ˜¯å€‹æ•¸å­¸å¤§å¸«ï¼ã€</p>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Kevin çš„çš®å¡ä¸˜æ•¸å­¸å†’éšªå·¥ä½œå®¤. All PokÃ©mon elements are &copy; Nintendo/Game Freak.</p>
        </div>
    </footer>

    <script>
        // JavaScript äº’å‹•é‚è¼¯
        const allQuestions = {
            addition: [
                { id: 1, answer: 3, denominator: 4 }, // 1/4 + 2/4 = 3/4
                { id: 2, answer: 4, denominator: 5 }  // 3/5 + 1/5 = 4/5
            ],
            subtraction: [
                { id: 1, answer: 3, denominator: 8 }, // 5/8 - 2/8 = 3/8
                { id: 2, answer: 4, denominator: 10 } // 7/10 - 3/10 = 4/10
            ],
            challenge: [
                { id: 1, answer: 5, denominator: 6 },  // 2/6 + 3/6 = 5/6
                { id: 2, answer: 5, denominator: 9 },  // 8/9 - 3/9 = 5/9
                { id: 3, answer: 4, denominator: 10 } // 1/10 + 5/10 - 2/10 = 4/10
            ]
        };

        let correctAnswersCount = 0;
        let totalQuestionsAttempted = 0;
        let completedChallenges = 0;

        // è¼”åŠ©å‡½æ•¸ï¼šæ’­æ”¾çš®å¡ä¸˜éŸ³æ•ˆ (æ­¤è™•ç‚ºæ¨¡æ“¬ï¼Œå¯¦éš›éœ€éŸ³æª”)
        function playPikachuSound(type) {
            console.log(`Pikachu says: ${type}!`);
            // å¯¦éš›æ‡‰ç‚º: new Audio('path/to/pikachu-sound.mp3').play();
        }

        // è¼”åŠ©å‡½æ•¸ï¼šæ›´æ–°çš®å¡ä¸˜å‹•ç•«
        function updatePikachuAnimation(elementId, type) {
            const pikachuElement = document.getElementById(elementId);
            if (pikachuElement) {
                pikachuElement.className = 'pikachu-feedback-animation'; // é‡ç½®
                pikachuElement.classList.add(type);
                // å¯¦éš›å¯é€é CSS keyframes æˆ– Lottie å‹•ç•«åº«å¯¦ç¾æ›´è¤‡é›œå‹•ç•«
            }
        }

        // æ»¾å‹•åˆ°æŒ‡å®šå€å¡Š
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // æª¢æŸ¥åŠ æ³•ç­”æ¡ˆ
        function checkAdditionAnswer(questionId) {
            const question = allQuestions.addition.find(q => q.id === questionId);
            const inputNum = parseInt(document.getElementById(`add${questionId}_num`).value);
            const feedbackElement = document.getElementById(`add${questionId}_feedback`);
            const pikachuElementId = `add${questionId}_pikachu`;

            totalQuestionsAttempted++;

            if (inputNum === question.answer) {
                feedbackElement.textContent = `çš®å¡ï¼ä½ ç­”å°äº†ï¼ç­”æ¡ˆæ˜¯ ${question.answer}/${question.denominator}ï¼`;
                feedbackElement.classList.remove('wrong');
                feedbackElement.classList.add('correct');
                updatePikachuAnimation(pikachuElementId, 'happy');
                playPikachuSound('correct');
                correctAnswersCount++;
            } else {
                feedbackElement.textContent = `çš®å¡...ç­”éŒ¯äº†å–”ï¼Œå†æƒ³æƒ³çœ‹ï¼åˆ¥å¿˜äº†åˆ†æ¯ä¸è®Šï¼Œåˆ†å­ç›¸åŠ å–”ã€‚`;
                feedbackElement.classList.remove('correct');
                feedbackElement.classList.add('wrong');
                updatePikachuAnimation(pikachuElementId, 'thinking');
                playPikachuSound('wrong');
            }
            updateResults();
        }

        // æ¸›æ³•ç·´ç¿’ä¸­çš„ç§»é™¤èƒ½é‡å¡ŠåŠŸèƒ½
        let currentRemovedEnergy = 0;
        function removeEnergy(element) {
            if (element.classList.contains('removable')) {
                element.style.opacity = '0.3';
                element.style.pointerEvents = 'none'; // é˜²æ­¢é‡è¤‡é»æ“Š
                currentRemovedEnergy++;
                playPikachuSound('drink'); // æ¨¡æ“¬å–æ‰çš„éŸ³æ•ˆ
            }
        }

        // æª¢æŸ¥æ¸›æ³•ç­”æ¡ˆ
        function checkSubtractionAnswer(questionId) {
            const question = allQuestions.subtraction.find(q => q.id === questionId);
            const inputNum = parseInt(document.getElementById(`sub${questionId}_num`).value);
            const feedbackElement = document.getElementById(`sub${questionId}_feedback`);
            const pikachuElementId = `sub${questionId}_pikachu`;

            totalQuestionsAttempted++;

            if (inputNum === question.answer) {
                feedbackElement.textContent = `çš®å¡ï¼ä½ ç­”å°äº†ï¼ç­”æ¡ˆæ˜¯ ${question.answer}/${question.denominator}ï¼`;
                feedbackElement.classList.remove('wrong');
                feedbackElement.classList.add('correct');
                updatePikachuAnimation(pikachuElementId, 'happy');
                playPikachuSound('correct');
                correctAnswersCount++;
            } else {
                feedbackElement.textContent = `çš®å¡...ç­”éŒ¯äº†å–”ï¼Œå†æƒ³æƒ³çœ‹ï¼åˆ¥å¿˜äº†åˆ†æ¯ä¸è®Šï¼Œåˆ†å­ç›¸æ¸›å–”ã€‚`;
                feedbackElement.classList.remove('correct');
                feedbackElement.classList.add('wrong');
                updatePikachuAnimation(pikachuElementId, 'thinking');
                playPikachuSound('wrong');
            }
            // é‡ç½®ç§»é™¤èƒ½é‡å¡Šè¨ˆæ•¸å’Œè¦–è¦ºç‹€æ…‹
            if (questionId === 1) {
                currentRemovedEnergy = 0;
                document.querySelectorAll('#drag_sub_1 .removable').forEach(el => {
                    el.style.opacity = '1';
                    el.style.pointerEvents = 'auto';
                });
            }
            updateResults();
        }

        // æŒ‘æˆ°æ¨¡å¼çš„å½ˆå‡ºè¦–çª—ï¼ˆç°¡åŒ–ç‚ºç›´æ¥æª¢æŸ¥ï¼‰
        function openChallengeModal(challengeId) {
            const challengeCard = document.querySelector(`.challenge-card[data-challenge-id="${challengeId}"]`);
            if (challengeCard.classList.contains('locked')) {
                alert('é€™å€‹æŒ‘æˆ°é‚„æ²’æœ‰è§£é–å–”ï¼è«‹å…ˆå®Œæˆå‰ä¸€å€‹æŒ‘æˆ°ã€‚');
                return;
            }

            let userAnswer = prompt(`è«‹è¼¸å…¥æŒ‘æˆ° ${challengeId} çš„åˆ†å­ç­”æ¡ˆï¼š`);
            userAnswer = parseInt(userAnswer);

            const question = allQuestions.challenge.find(q => q.id === challengeId);
            const feedbackPikachuId = 'challenge_pikachu';
            const answerDisplay = document.getElementById(`challenge${challengeId}_ans`);

            if (userAnswer === question.answer) {
                alert(`çš®å¡ï¼ç­”å°äº†ï¼æ­å–œä½ å®ŒæˆæŒ‘æˆ° ${challengeId}ï¼`);
                playPikachuSound('correct');
                updatePikachuAnimation(feedbackPikachuId, 'happy');
                answerDisplay.textContent = `${question.answer}/${question.denominator}`;
                
                // è§£é–ä¸‹ä¸€å€‹æŒ‘æˆ°å’Œå¾½ç« 
                completedChallenges++;
                document.getElementById(`badge${challengeId}`).classList.add('unlocked-badge');
                challengeCard.querySelector('.lock-icon').textContent = 'âœ…';
                
                if (challengeId < allQuestions.challenge.length) {
                    const nextChallengeCard = document.querySelector(`.challenge-card[data-challenge-id="${challengeId + 1}"]`);
                    if (nextChallengeCard) {
                        nextChallengeCard.classList.remove('locked');
                        nextChallengeCard.classList.add('unlocked');
                        nextChallengeCard.querySelector('.lock-icon').textContent = 'ğŸ”’'; // åªæ˜¯è§£é–ï¼Œä½†é‚„æ²’å®Œæˆ
                        nextChallengeCard.querySelector('.check-button').disabled = false;
                        nextChallengeCard.querySelector('.check-button').textContent = 'é–‹å§‹æŒ‘æˆ°';
                    }
                }
                
            } else {
                alert('çš®å¡...ç­”éŒ¯äº†å–”ï¼Œå†è©¦ä¸€æ¬¡ï¼');
                playPikachuSound('wrong');
                updatePikachuAnimation(feedbackPikachuId, 'sad');
            }
            updateResults();
        }

        // æ›´æ–°å­¸ç¿’æˆæœå±•ç¤º
        function updateResults() {
            const totalMathQuestions = allQuestions.addition.length + allQuestions.subtraction.length + completedChallenges;
            
            document.getElementById('correct_answers_count').textContent = correctAnswersCount;
            document.getElementById('total_questions_count').textContent = totalMathQuestions; // åŒ…æ‹¬æ‰€æœ‰åŠ æ¸›æ³•é¡Œèˆ‡æŒ‘æˆ°é¡Œ

            const accuracy = totalMathQuestions > 0 ? (correctAnswersCount / totalMathQuestions * 100).toFixed(0) : 0;
            document.getElementById('accuracy_rate').textContent = `${accuracy}%`;

            let rank = "æ–°æ‰‹è¨“ç·´å¸«";
            if (accuracy >= 80 && completedChallenges >= 2) {
                rank = "è³‡æ·±è¨“ç·´å¸«";
            } else if (accuracy >= 60 && completedChallenges >= 1) {
                rank = "é€²éšè¨“ç·´å¸«";
            }
            document.getElementById('trainer_rank').textContent = rank;

            const today = new Date();
            document.getElementById('certificate_date').textContent = `${today.getFullYear()}å¹´${today.getMonth() + 1}æœˆ${today.getDate()}æ—¥`;
        }

        // åˆå§‹åŒ–æ‹–æ›³åŠŸèƒ½ (ç°¡åŒ–ç‚ºè¦–è¦ºæ•ˆæœï¼Œä¸å¯¦ä½œè¤‡é›œé‚è¼¯)
        function initDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable-item');
            const dropTargets = document.querySelectorAll('.draggable-drop-target');

            draggables.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', e.target.dataset.value);
                    e.target.classList.add('dragging');
                });
                item.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging');
                });
            });

            dropTargets.forEach(target => {
                target.addEventListener('dragover', (e) => {
                    e.preventDefault(); // å…è¨±æ‹–æ”¾
                    target.style.backgroundColor = 'rgba(255,255,0,0.2)'; // æ‹–æ›³æ™‚é¡¯ç¤ºæ·ºé»ƒè‰²èƒŒæ™¯
                });
                target.addEventListener('dragleave', (e) => {
                    target.style.backgroundColor = '';
                });
                target.addEventListener('drop', (e) => {
                    e.preventDefault();
                    target.style.backgroundColor = '';
                    const data = e.dataTransfer.getData('text/plain');
                    // åœ¨é€™è£¡å¯ä»¥æ ¹æ“š data-value åŸ·è¡ŒéŠæˆ²é‚è¼¯
                    const droppedItem = document.createElement('div');
                    droppedItem.classList.add('draggable-item', 'energy-block');
                    droppedItem.style.pointerEvents = 'none'; // æ”¾ç½®å¾Œä¸å¯å†æ‹–æ›³
                    target.appendChild(droppedItem);
                    playPikachuSound('pika'); // æ¨¡æ“¬æ”¾ç½®éŸ³æ•ˆ
                });
            });
        }

        // é é¢åŠ è¼‰å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', () => {
            initDragAndDrop();
            updateResults(); // åˆå§‹åŒ–è­‰æ›¸æ—¥æœŸç­‰
            // å¼·åˆ¶è¨­å®šç¬¬ä¸€é“æŒ‘æˆ°é¡Œç‚ºå·²è§£é–
            const firstChallengeCard = document.querySelector('.challenge-card[data-challenge-id="1"]');
            if (firstChallengeCard) {
                firstChallengeCard.classList.remove('locked');
                firstChallengeCard.classList.add('unlocked');
                firstChallengeCard.querySelector('.lock-icon').textContent = 'âœ…';
                firstChallengeCard.querySelector('.check-button').disabled = false;
                firstChallengeCard.querySelector('.check-button').textContent = 'é–‹å§‹æŒ‘æˆ°';
            }
        });
    </script>
</body>
</html>
```