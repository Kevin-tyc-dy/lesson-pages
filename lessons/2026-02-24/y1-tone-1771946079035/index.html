<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kevinçš„è¿ªå£«å°¼é­”æ³•æ•¸å­—å­¸é™¢ - åé€²ä½å†’éšª</title>
    <!-- å¼•å…¥Google Fontsï¼Œé¸ç”¨Rubikå’ŒComic Neueï¼Œç‡Ÿé€ æ´»æ½‘æœ‰è¶£çš„è¿ªå£«å°¼é¢¨æ ¼å­—é«” -->
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Rubik:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSSè®Šæ•¸å®šç¾©è¿ªå£«å°¼ä¸»é¡Œé¡è‰²ï¼Œæ–¹ä¾¿çµ±ä¸€ç®¡ç†å’Œä¿®æ”¹ */
        :root {
            --disney-blue: #66CCFF; /* æ·ºè—è‰² */
            --disney-yellow: #FFD700; /* é‡‘é»ƒè‰² */
            --disney-red: #FF6347; /* çŠç‘šç´… */
            --disney-green: #3CB371; /* æµ·æ´‹ç¶  */
            --disney-purple: #9370DB; /* è–°è¡£è‰ç´« */
            --disney-darkblue: #0077B6; /* æ·±è—è‰² */
            --disney-white: #FFFFFF; /* ç™½è‰² */
            --disney-gray: #F0F0F0; /* æ·ºç°è‰² */

            /* æ•¸å­—ç©æœ¨çš„é¡è‰²å®šç¾© */
            --block-ones: #FFD700; /* å€‹ä½: é»ƒè‰² */
            --block-tens: #66CCFF; /* åä½: æ·ºè—è‰² */
            --block-hundreds: #FF6347; /* ç™¾ä½: çŠç‘šç´… */
            --block-thousands: #3CB371; /* åƒä½: æµ·æ´‹ç¶  */

            /* é™°å½±æ•ˆæœ */
            --shadow-light: rgba(0,0,0,0.1);
            --shadow-medium: rgba(0,0,0,0.2);
            --shadow-dark: rgba(0,0,0,0.4);
        }

        /* å…¨å±€æ¨£å¼è¨­å®š */
        body {
            font-family: 'Rubik', 'Comic Neue', sans-serif; /* ä½¿ç”¨è¿ªå£«å°¼é¢¨æ ¼å­—é«” */
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--disney-blue) 0%, var(--disney-purple) 100%); /* æ¼¸å±¤èƒŒæ™¯ */
            color: #333;
            overflow-x: hidden;
            text-align: center;
            line-height: 1.6;
        }

        /* ä¸»è¦å…§å®¹å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            background-color: var(--disney-white);
            border-radius: 25px;
            box-shadow: 0 10px 30px var(--shadow-dark);
            padding: 30px;
            position: relative;
        }

        /* é é¢æ¨™é¡Œå€å¡Š */
        header {
            background-color: var(--disney-darkblue);
            color: var(--disney-white);
            padding: 20px 0;
            border-radius: 20px 20px 0 0;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px var(--shadow-medium);
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        header h1 {
            margin: 0;
            font-size: 3em;
            text-shadow: 3px 3px var(--shadow-dark);
            font-weight: 700;
            letter-spacing: 2px;
        }

        .mickey-logo {
            width: 80px;
            height: auto;
            /* Gemini prompt: "A playful, iconic Mickey Mouse head silhouette logo suitable for an educational game header." */
            background-image: url('https://i.imgur.com/example_mickey_logo.png'); /* æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ */
            background-size: contain;
            background-repeat: no-repeat;
        }

        /* é€šç”¨å€å¡Šæ¨£å¼ */
        section {
            padding: 40px 20px;
            margin-bottom: 30px;
            background-color: var(--disney-gray);
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow-light);
            text-align: left;
        }

        h2 {
            color: var(--disney-darkblue);
            font-size: 2.5em;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 2px 2px var(--shadow-light);
            position: relative;
        }
        h2::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: var(--disney-red);
            margin: 10px auto 0;
            border-radius: 2px;
        }

        /* 1. å¼•å°å‹•ç•«æˆ–é–‹é ­å ´æ™¯ */
        #intro-scene {
            position: relative;
            height: 500px;
            /* Gemini prompt: "A magical Disney-style castle with fireworks in the background, suitable for an opening scene. Style: Whimsical, inviting." */
            background: url('https://i.imgur.com/example_disney_castle.png') center center / cover no-repeat; /* æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ */
            border-radius: 15px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--disney-white);
            text-shadow: 2px 2px 5px var(--shadow-dark);
            font-size: 1.8em;
            flex-direction: column;
            gap: 20px;
        }
        #intro-scene .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4); /* åŠé€æ˜é®ç½© */
            z-index: 1;
        }
        #intro-scene h3 {
            position: relative;
            z-index: 2;
            font-size: 3.5em;
            margin-bottom: 15px;
            animation: fadeInScale 2s ease-out forwards; /* æ·¡å…¥æ”¾å¤§å‹•ç•« */
        }
        #intro-scene p {
            position: relative;
            z-index: 2;
            font-size: 1.5em;
            max-width: 80%;
            animation: fadeInScale 2.5s ease-out 0.5s forwards; /* å»¶é²æ·¡å…¥æ”¾å¤§å‹•ç•« */
            opacity: 0;
        }
        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        .start-button {
            position: relative;
            z-index: 2;
            background-color: var(--disney-yellow);
            color: var(--disney-darkblue);
            padding: 15px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.3em;
            box-shadow: 0 5px 15px var(--shadow-dark);
            transition: transform 0.3s ease, background-color 0.3s ease;
            margin-top: 30px;
            cursor: pointer;
            border: none;
            animation: bounceIn 1s ease-out 1s forwards; /* å½ˆè·³å‹•ç•« */
            opacity: 0;
        }
        .start-button:hover {
            transform: translateY(-5px) scale(1.05);
            background-color: #FFEA00;
        }
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3); }
            50% { opacity: 0.8; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }
        .character-overlay {
            position: absolute;
            bottom: 0;
            left: 50px;
            width: 150px;
            height: auto;
            z-index: 3;
            /* Gemini prompt: "A joyful Mickey Mouse in an adventurer outfit, waving, for an educational game intro scene." */
            background-image: url('https://i.imgur.com/example_mickey_adventurer.png'); /* æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ */
            background-size: contain;
            background-repeat: no-repeat;
            animation: floatUp 3s ease-in-out infinite alternate; /* æµ®å‹•å‹•ç•« */
        }
        @keyframes floatUp {
            from { transform: translateY(0); }
            to { transform: translateY(-15px); }
        }

        /* 2. æ•¸ä½åŒ–çš„æ•¸å­—ç©æœ¨æˆ–æ–¹å¡Š */
        .block-palette {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            padding: 20px;
            background-color: var(--disney-white);
            border-radius: 10px;
            box-shadow: inset 0 2px 5px var(--shadow-light);
        }

        .number-block {
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: 700;
            color: var(--disney-white);
            border-radius: 10px;
            cursor: grab;
            box-shadow: 0 5px 15px var(--shadow-medium), inset 0 0 10px rgba(255,255,255,0.5);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            user-select: none;
            border: 3px solid rgba(255,255,255,0.7);
        }
        .number-block:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 20px var(--shadow-dark), inset 0 0 15px rgba(255,255,255,0.7);
        }
        .number-block:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        /* å„ç¨®ç©æœ¨é¡è‰² */
        .block-ones { background-color: var(--block-ones); }
        .block-tens { background-color: var(--block-tens); }
        .block-hundreds { background-color: var(--block-hundreds); }
        .block-thousands { background-color: var(--block-thousands); }

        .block-label {
            position: absolute;
            bottom: -25px;
            font-size: 0.8em;
            color: #555;
            white-space: nowrap;
        }

        /* 3. äº’å‹•å¼ç·´ç¿’é¡Œä»‹é¢ */
        .game-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }
        .game-card {
            background-color: var(--disney-white);
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow-light);
            padding: 25px;
            width: calc(33% - 40px); /* æ¯è¡Œä¸‰å¼µå¡ç‰‡ */
            min-width: 300px;
            text-align: center;
            transition: transform 0.3s ease;
            border: 2px solid var(--disney-blue);
        }
        .game-card:hover {
            transform: translateY(-8px);
        }
        .game-card h3 {
            color: var(--disney-red);
            font-size: 1.8em;
            margin-bottom: 20px;
            text-shadow: 1px 1px var(--shadow-light);
        }

        /* æ‹–æ›³å€æ¨£å¼ */
        .drop-zone {
            min-height: 120px;
            border: 3px dashed var(--disney-darkblue);
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            background-color: var(--disney-gray);
            flex-wrap: wrap;
            padding: 10px;
        }
        .drop-zone.hover {
            background-color: var(--disney-blue);
            border-color: var(--disney-white);
        }
        .dropped-block {
            width: 60px;
            height: 60px;
            font-size: 1.8em;
            margin: 5px;
        }
        .target-number {
            font-size: 3em;
            font-weight: 700;
            color: var(--disney-purple);
            margin-bottom: 15px;
            display: block;
        }
        .action-button {
            background-color: var(--disney-green);
            color: var(--disney-white);
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            box-shadow: 0 3px 10px var(--shadow-medium);
            margin-top: 15px;
        }
        .action-button:hover {
            background-color: #4CAF50;
            transform: translateY(-2px);
        }

        /* ä½å€¼è¾¨è­˜éŠæˆ² */
        .number-display {
            font-size: 4em;
            font-weight: 700;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
        }
        .number-digit {
            padding: 5px 10px;
            border-radius: 8px;
            transition: background-color 0.2s ease, transform 0.2s ease;
            border: 2px solid transparent;
        }
        .number-digit:hover {
            background-color: var(--disney-yellow);
            transform: scale(1.1);
        }
        .number-digit.selected {
            border-color: var(--disney-red);
            box-shadow: 0 0 15px var(--disney-red);
        }
        .place-value-question {
            font-size: 1.5em;
            color: var(--disney-darkblue);
            margin-bottom: 15px;
        }

        /* æ•¸å­—æ¯”è¼ƒéŠæˆ² */
        .comparison-area {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            margin-top: 20px;
        }
        .comparison-number-display {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--disney-purple);
            margin-bottom: 10px;
        }
        .comparison-zone {
            min-height: 150px;
            width: 45%;
            border: 2px dashed var(--disney-purple);
            border-radius: 10px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            align-content: flex-start;
            justify-content: center;
            background-color: var(--disney-gray);
        }
        .operator-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 0 15px;
        }
        .operator-button {
            background-color: var(--disney-red);
            color: var(--disney-white);
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            font-size: 1.5em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .operator-button.selected {
            background-color: var(--disney-yellow);
            color: var(--disney-darkblue);
        }
        .treasure-chest-icon {
            width: 50px;
            height: auto;
            margin-bottom: 10px;
            /* Gemini prompt: "A small, shiny, cartoon-style treasure chest icon with gold coins spilling out." */
            background-image: url('https://i.imgur.com/example_treasure_chest.png'); /* æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ */
            background-size: contain;
            background-repeat: no-repeat;
            display: inline-block;
        }

        /* 4. å­¸ç¿’å…§å®¹å±•ç¤ºå€ */
        .learning-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        .learning-card {
            background-color: var(--disney-white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px var(--shadow-light);
            display: flex;
            align-items: center;
            text-align: left;
            border: 2px solid var(--disney-green);
        }
        .learning-card:nth-child(even) { /* å¶æ•¸å¡ç‰‡åå‘æ’åˆ— */
            flex-direction: row-reverse;
            border-color: var(--disney-purple);
        }
        .learning-text {
            flex: 2;
            padding: 0 20px;
        }
        .learning-image {
            flex: 1;
            max-width: 250px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px var(--shadow-medium);
        }
        .learning-image img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }
        .learning-text h3 {
            color: var(--disney-red);
            font-size: 2em;
            margin-bottom: 15px;
            text-align: left;
        }
        .learning-text p {
            font-size: 1.1em;
            color: #555;
        }
        .learning-card a {
            color: var(--disney-darkblue);
            text-decoration: none;
            font-weight: bold;
        }
        .learning-card a:hover {
            text-decoration: underline;
        }

        /* 5. æˆå°±èˆ‡çå‹µç³»çµ± */
        #achievements {
            text-align: center;
        }
        .badge-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            margin-top: 30px;
        }
        .badge-item {
            width: 120px;
            height: 120px;
            background-color: var(--disney-gray);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px var(--shadow-light);
            border: 3px solid var(--disney-yellow);
            opacity: 0.5; /* é è¨­é–å®šç‹€æ…‹ç‚ºåŠé€æ˜ */
            transition: opacity 0.3s ease, transform 0.3s ease;
            position: relative;
        }
        .badge-item.unlocked {
            opacity: 1;
            transform: scale(1.1);
            border-color: var(--disney-red);
            animation: pulse 1.5s infinite alternate; /* è§£é–å¾Œè„ˆå‹•å‹•ç•« */
        }
        @keyframes pulse {
            from { transform: scale(1.1); box-shadow: 0 0 15px var(--disney-red); }
            to { transform: scale(1.15); box-shadow: 0 0 25px var(--disney-red); }
        }
        .badge-item img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: contain;
            /* Gemini prompt: "A round, golden blank badge icon for an achievement system." */
            background-image: url('https://i.imgur.com/example_badge_blank.png'); /* æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ */
            background-size: cover;
            background-repeat: no-repeat;
        }
        /* å¾½ç« è§£é–å¾Œçš„å°ˆå±¬åœ–ç‰‡æç¤º (å¯¦éš›å°ˆæ¡ˆä¸­æœƒæ›¿æ›src) */
        /* .badge-item #badge-adventurer img.unlocked-img { background-image: url('https://i.imgur.com/example_badge_adventurer.png'); } */
        /* .badge-item #badge-master img.unlocked-img { background-image: url('https://i.imgur.com/example_badge_master.png'); } */

        .badge-item p {
            font-size: 0.9em;
            font-weight: 700;
            color: var(--disney-darkblue);
            margin-top: 5px;
            text-align: center;
        }

        /* 6. èƒŒæ™¯éŸ³æ¨‚èˆ‡éŸ³æ•ˆæ§åˆ¶ */
        #audio-controls {
            margin-top: 40px;
            text-align: center;
        }
        #audio-controls button {
            background-color: var(--disney-purple);
            color: var(--disney-white);
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s ease;
        }
        #audio-controls button:hover {
            background-color: #A052E0;
        }

        /* éŠæˆ²åé¥‹è¨Šæ¯ */
        .feedback-message {
            margin-top: 20px;
            font-size: 1.3em;
            font-weight: 700;
            color: var(--disney-darkblue);
            min-height: 30px;
        }
        .feedback-message.correct { color: var(--disney-green); }
        .feedback-message.incorrect { color: var(--disney-red); }

        /* é€šç”¨å·¥å…·é¡ */
        .hidden { display: none !important; }
        .disabled { opacity: 0.6; cursor: not-allowed; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="mickey-logo" aria-label="ç±³å¥‡è€é¼ æ¨™èªŒ"></div>
            <h1>Kevinçš„è¿ªå£«å°¼é­”æ³•æ•¸å­—å­¸é™¢</h1>
        </header>

        <!-- 1. å¼•å°å‹•ç•«æˆ–é–‹é ­å ´æ™¯ -->
        <section id="intro-scene">
            <div class="overlay"></div>
            <h3>æ­¡è¿ä¾†åˆ°é­”æ³•æ•¸å­—å¯¶è—ï¼</h3>
            <p>ç±³å¥‡ã€ç±³å¦®ã€å”è€é´¨å’Œé«˜é£›éœ€è¦ä½ çš„å¹«åŠ©ï¼Œä¾†è§£é–‹åé€²ä½çš„é­”æ³•ï¼Œæ‰¾åˆ°éš±è—çš„æ•¸å­—å¯¶è—ï¼å¯¶è—è¢«åˆ†æˆ10ç­‰ä»½ï¼Œéœ€è¦èªè­˜10ã€100ã€1000çš„é—œä¿‚ä¾†æ‰¾åˆ°æ­£ç¢ºçš„è·¯å¾‘ã€‚</p>
            <button class="start-button" onclick="startGame()">é–‹å§‹å†’éšª</button>
            <div class="character-overlay" aria-label="å†’éšªå®¶ç±³å¥‡è€é¼ "></div>
            <audio id="introMusic" preload="auto">
                <!-- Gemini prompt: "A short, joyful, orchestral opening theme music (approx. 15-30 seconds) in the style of classic Disney movie openings." -->
                <source src="https://i.imgur.com/example_disney_intro_music.mp3" type="audio/mpeg"> <!-- æ›¿æ›ç‚ºå¯¦éš›éŸ³é »æ–‡ä»¶ -->
                æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒéŸ³é »æ’­æ”¾ã€‚
            </audio>
        </section>

        <div id="game-dashboard" class="hidden">
            <!-- 2. æ•¸ä½åŒ–çš„æ•¸å­—ç©æœ¨æˆ–æ–¹å¡Š - å·¥å…·å€ -->
            <section id="number-blocks-palette">
                <h2>é­”æ³•æ•¸å­—ç©æœ¨</h2>
                <p>æ‹–æ›³é€™äº›åƒæ¨‚é«˜ä¸€æ¨£çš„ç©æœ¨ä¾†å»ºæ§‹æ•¸å­—ï¼ç•¶10å€‹å°ç©æœ¨çµ„åˆåœ¨ä¸€èµ·æ™‚ï¼Œå®ƒå€‘æœƒç¥å¥‡åœ°è®Šæˆä¸€å€‹å¤§ç©æœ¨ï¼</p>
                <div class="block-palette">
                    <div class="number-block block-thousands" draggable="true" data-value="1000" data-type="thousands">1000<span class="block-label">åƒä½</span></div>
                    <div class="number-block block-hundreds" draggable="true" data-value="100" data-type="hundreds">100<span class="block-label">ç™¾ä½</span></div>
                    <div class="number-block block-tens" draggable="true" data-value="10" data-type="tens">10<span class="block-label">åä½</span></div>
                    <div class="number-block block-ones" draggable="true" data-value="1" data-type="ones">1<span class="block-label">å€‹ä½</span></div>
                </div>
            </section>

            <!-- 3. äº’å‹•å¼ç·´ç¿’é¡Œä»‹é¢ -->
            <section id="interactive-games">
                <h2>äº’å‹•é­”æ³•æŒ‘æˆ°</h2>
                <div class="game-section">
                    <!-- æ•¸å­—å»ºæ§‹å™¨ -->
                    <div class="game-card">
                        <h3>æ•¸å­—å»ºæ§‹å™¨ <span class="treasure-chest-icon"></span></h3>
                        <p>è«‹ç”¨ç©æœ¨æ‹¼å‡ºæ•¸å­—ï¼š<span id="builderTargetNumber" class="target-number"></span></p>
                        <div id="builderDropZone" class="drop-zone" ondragover="allowDrop(event)" ondrop="drop(event, 'builder')" ondragleave="leaveDrop(event)"></div>
                        <div class="feedback-message" id="builderFeedback"></div>
                        <button class="action-button" onclick="checkNumberBuilder()">æª¢æŸ¥ç­”æ¡ˆ</button>
                        <button class="action-button" onclick="generateNewBuilderNumber()">æ–°çš„æŒ‘æˆ°</button>
                    </div>

                    <!-- ä½å€¼è¾¨è­˜éŠæˆ² -->
                    <div class="game-card">
                        <h3>ä½å€¼åµæ¢ <span class="treasure-chest-icon"></span></h3>
                        <p class="place-value-question">é»é¸æ•¸å­—ä¸­ä»£è¡¨<span id="placeValueQuestion" style="color:var(--disney-red); font-weight:700;"></span>çš„æ•¸å­—ï¼</p>
                        <div id="placeValueDisplay" class="number-display"></div>
                        <div class="feedback-message" id="placeValueFeedback"></div>
                        <button class="action-button" onclick="checkPlaceValue()">æª¢æŸ¥ç­”æ¡ˆ</button>
                        <button class="action-button" onclick="generateNewPlaceValue()">æ–°çš„æŒ‘æˆ°</button>
                    </div>

                    <!-- æ•¸å­—æ¯”è¼ƒ -->
                    <div class="game-card">
                        <h3>å¯¶è—æ¯”è¼ƒ <span class="treasure-chest-icon"></span></h3>
                        <p>ç±³å¥‡å’Œç±³å¦®èª°çš„å¯¶è—æ¯”è¼ƒå¤šå‘¢ï¼Ÿ</p>
                        <div class="comparison-area">
                            <div>
                                <span id="compareNumber1" class="comparison-number-display"></span>
                                <div id="compareDropZone1" class="comparison-zone drop-zone" ondragover="allowDrop(event)" ondrop="drop(event, 'compare1')" ondragleave="leaveDrop(event)"></div>
                            </div>
                            <div class="operator-selector">
                                <button class="operator-button" data-operator="<" onclick="selectOperator(this)"> &lt; </button>
                                <button class="operator-button" data-operator="=" onclick="selectOperator(this)"> = </button>
                                <button class="operator-button" data-operator=">" onclick="selectOperator(this)"> &gt; </button>
                            </div>
                            <div>
                                <span id="compareNumber2" class="comparison-number-display"></span>
                                <div id="compareDropZone2" class="comparison-zone drop-zone" ondragover="allowDrop(event)" ondrop="drop(event, 'compare2')" ondragleave="leaveDrop(event)"></div>
                            </div>
                        </div>
                        <div class="feedback-message" id="compareFeedback"></div>
                        <button class="action-button" onclick="checkNumberComparison()">æª¢æŸ¥ç­”æ¡ˆ</button>
                        <button class="action-button" onclick="generateNewComparison()">æ–°çš„æŒ‘æˆ°</button>
                    </div>
                </div>
            </section>

            <!-- 4. å­¸ç¿’å…§å®¹å±•ç¤ºå€ -->
            <section id="learning-content">
                <h2>é­”æ³•æ•¸å­—æ­ç§˜</h2>
                <div class="learning-content">
                    <div class="learning-card">
                        <!-- Gemini prompt: "An educational diagram showing a place value chart (å€‹, å, ç™¾, åƒ) with examples, in a clear, friendly style suitable for elementary school." -->
                        <img src="https://i.imgur.com/example_place_value_chart.png" alt="ä½å€¼è¡¨åœ–ç¤º" class="learning-image"> <!-- æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ -->
                        <div class="learning-text">
                            <h3>ä½å€¼æ˜¯ä»€éº¼ï¼Ÿ</h3>
                            <p>åœ¨åé€²ä½ä¸­ï¼Œæ¯å€‹æ•¸å­—æ‰€åœ¨çš„ä½ç½®éƒ½æœ‰ä¸åŒçš„ã€Œä½å€¼ã€ã€‚å€‹ä½ä»£è¡¨1ï¼Œåä½ä»£è¡¨10ï¼Œç™¾ä½ä»£è¡¨100ï¼Œåƒä½ä»£è¡¨1000ã€‚é€™å°±åƒé­”æ³•å¸«çš„å¯¶ç®±ï¼Œæ¯å€‹æ ¼å­æ”¾çš„å¯¶çŸ³æ•¸é‡éƒ½ä¸ä¸€æ¨£å“¦ï¼äº†è§£ä½å€¼æ˜¯æ•¸å­—å†’éšªçš„ç¬¬ä¸€æ­¥ã€‚</p>
                        </div>
                    </div>
                    <div class="learning-card">
                        <!-- Gemini prompt: "A whimsical illustration of a magician transforming 10 small coins into 1 large gem, representing the concept of carrying over (é€²ä½) in a Disney-like style." -->
                        <img src="https://i.imgur.com/example_carry_over_magic.png" alt="é€²ä½é­”æ³•åœ–ç¤º" class="learning-image"> <!-- æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ -->
                        <div class="learning-text">
                            <h3>é€²ä½é­”æ³•</h3>
                            <p>ç•¶ä½ åœ¨å€‹ä½ç´¯ç©äº†10å€‹å°é‡‘å¹£ï¼Œé­”æ³•å¸«å°±æœƒæŠŠå®ƒå€‘è®Šæˆ1å€‹å¤§é‡‘å¹£æ”¾åˆ°åä½ï¼é€™å°±æ˜¯ã€Œé€²ä½ã€çš„ç§˜å¯†ã€‚æ¯ç•¶ä¸€å€‹ä½å€¼é”åˆ°10ï¼Œå®ƒå°±æœƒè‡ªå‹•è®Šæˆä¸‹ä¸€å€‹æ›´å¤§çš„ä½å€¼ã€‚</p>
                            <p>æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥åƒè€ƒï¼š<a href="https://www.ixl.com/math/grade-5/place-values" target="_blank">IXL - Place Values</a></p>
                        </div>
                    </div>
                    <div class="learning-card">
                        <!-- Gemini prompt: "A charming illustration of a princess borrowing from her jewelry box: one large pearl bracelet (worth 10 small pearls) to get more small pearls, representing borrowing (é€€ä½) in a Disney style." -->
                        <img src="https://i.imgur.com/example_borrow_princess.png" alt="é€€ä½å…¬ä¸»åœ–ç¤º" class="learning-image"> <!-- æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ -->
                        <div class="learning-text">
                            <h3>é€€ä½ç§˜ç¬ˆ</h3>
                            <p>æœ‰æ™‚å€™ï¼Œä½ éœ€è¦å¾åä½å€Ÿä¸€å€‹ã€Œå¤§å¯¶çŸ³ã€ä¾†å¹«å€‹ä½ï¼Œé€™æ™‚ä¸€å€‹å¤§å¯¶çŸ³æœƒè®Šæˆåå€‹å°å¯¶çŸ³ã€‚é€™å°±åƒå…¬ä¸»çš„ç å¯¶ç›’ï¼Œç•¶å€‹ä½çš„çç ä¸å¤ æ™‚ï¼Œå¥¹æœƒæŠŠä¸€ä¸²åé¡†çš„çç æ‰‹éŠæ‹†é–‹ä¾†ç”¨ï¼é€™å°±æ˜¯ã€Œé€€ä½ã€çš„é­”æ³•ã€‚</p>
                            <p>æ›´å¤šè³‡è¨Šï¼š<a href="https://www.khanacademy.org/math/arithmetic/arith-review-multiply-divide/arith-review-place-value/v/place-value-1" target="_blank">Khan Academy - Place Value</a></p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 5. æˆå°±èˆ‡çå‹µç³»çµ± -->
            <section id="achievements">
                <h2>Kevinçš„æ¦®è­½æ®¿å ‚</h2>
                <p>è§£é–é€™äº›å¾½ç« ï¼Œè­‰æ˜ä½ æ˜¯çœŸæ­£çš„æ•¸å­—å†’éšªå®¶ï¼</p>
                <div class="badge-grid">
                    <div class="badge-item" id="badge-adventurer">
                        <!-- Gemini prompt: "A grayscale or locked-style achievement badge icon with a compass and the text 'æ•¸å­—å†’éšªå®¶'." -->
                        <img src="https://i.imgur.com/example_badge_adventurer_locked.png" alt="æ•¸å­—å†’éšªå®¶å¾½ç«  (é–å®š)"> <!-- æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ -->
                        <p>æ•¸å­—å†’éšªå®¶</p>
                    </div>
                    <div class="badge-item" id="badge-master">
                        <!-- Gemini prompt: "A grayscale or locked-style achievement badge icon with a scroll and feather pen and the text 'ä½å€¼å¤§å¸«'." -->
                        <img src="https://i.imgur.com/example_badge_master_locked.png" alt="ä½å€¼å¤§å¸«å¾½ç«  (é–å®š)"> <!-- æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ -->
                        <p>ä½å€¼å¤§å¸«</p>
                    </div>
                    <div class="badge-item" id="badge-comparator">
                        <!-- Gemini prompt: "A grayscale or locked-style achievement badge icon with two treasure chests and an arrow symbol, and the text 'æ•¸å­—æ¯”è¼ƒé«˜æ‰‹'." -->
                        <img src="https://i.imgur.com/example_badge_comparator_locked.png" alt="æ•¸å­—æ¯”è¼ƒé«˜æ‰‹å¾½ç«  (é–å®š)"> <!-- æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ -->
                        <p>æ•¸å­—æ¯”è¼ƒé«˜æ‰‹</p>
                    </div>
                    <div class="badge-item" id="badge-genius">
                        <!-- Gemini prompt: "A grayscale or locked-style achievement badge icon with a shining number 10 and stars, and the text 'åé€²ä½å¤©æ‰'." -->
                        <img src="https://i.imgur.com/example_badge_genius_locked.png" alt="åé€²ä½å¤©æ‰å¾½ç«  (é–å®š)"> <!-- æ›¿æ›ç‚ºå¯¦éš›åœ–ç‰‡ -->
                        <p>åé€²ä½å¤©æ‰</p>
                    </div>
                </div>
            </section>

            <!-- 6. èƒŒæ™¯éŸ³æ¨‚èˆ‡éŸ³æ•ˆæ§åˆ¶ -->
            <section id="audio-controls">
                <h2>è²éŸ³è¨­å®š</h2>
                <button onclick="toggleMusic()">ğŸµ èƒŒæ™¯éŸ³æ¨‚</button>
                <button onclick="toggleSoundEffects()">ğŸ”Š éŸ³æ•ˆ</button>
                <audio id="backgroundMusic" loop preload="auto">
                    <!-- Gemini prompt: "An uplifting, adventurous, and slightly magical instrumental background music track (approx. 2-3 minutes loopable) in the style of Disney theme parks for an educational game." -->
                    <source src="https://i.imgur.com/example_disney_adventure_bgm.mp3" type="audio/mpeg"> <!-- æ›¿æ›ç‚ºå¯¦éš›éŸ³é »æ–‡ä»¶ -->
                    æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒéŸ³é »æ’­æ”¾ã€‚
                </audio>
                <audio id="sfxCorrect" preload="auto">
                    <!-- Gemini prompt: "A short, cheerful 'correct answer' sound effect, like a chime or magic sparkle." -->
                    <source src="https://i.imgur.com/example_sfx_correct.mp3" type="audio/mpeg"> <!-- æ›¿æ›ç‚ºå¯¦éš›éŸ³é »æ–‡ä»¶ -->
                </audio>
                <audio id="sfxIncorrect" preload="auto">
                    <!-- Gemini prompt: "A short, gentle 'incorrect answer' sound effect, like a soft 'boing' or 'uh-oh'." -->
                    <source src="https://i.imgur.com/example_sfx_incorrect.mp3" type="audio/mpeg"> <!-- æ›¿æ›ç‚ºå¯¦éš›éŸ³é »æ–‡ä»¶ -->
                </audio>
                <audio id="sfxDrop" preload="auto">
                    <!-- Gemini prompt: "A subtle, satisfying 'block drop' sound effect." -->
                    <source src="https://i.imgur.com/example_sfx_drop.mp3" type="audio/mpeg"> <!-- æ›¿æ›ç‚ºå¯¦éš›éŸ³é »æ–‡ä»¶ -->
                </audio>
                <audio id="sfxWin" preload="auto">
                    <!-- Gemini prompt: "A short, triumphant 'game won' sound effect, like a fanfare or celebratory jingle." -->
                    <source src="https://i.imgur.com/example_sfx_win.mp3" type="audio/mpeg"> <!-- æ›¿æ›ç‚ºå¯¦éš›éŸ³é »æ–‡ä»¶ -->
                </audio>
            </section>
        </div> <!-- End of #game-dashboard -->
    </div>

    <script>
        // ç²å–éŸ³é »å…ƒç´ 
        const introMusic = document.getElementById('introMusic');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const sfxCorrect = document.getElementById('sfxCorrect');
        const sfxIncorrect = document.getElementById('sfxIncorrect');
        const sfxDrop = document.getElementById('sfxDrop');
        const sfxWin = document.getElementById('sfxWin');

        let musicEnabled = false; // èƒŒæ™¯éŸ³æ¨‚ç‹€æ…‹
        let sfxEnabled = true;    // éŸ³æ•ˆç‹€æ…‹

        // æ‰€æœ‰å¯æ‹–æ›³ç©æœ¨çš„äº‹ä»¶ç›£è½
        const allBlocks = document.querySelectorAll('.number-block');
        allBlocks.forEach(block => {
            block.addEventListener('dragstart', drag);
        });

        // éŠæˆ²ç‹€æ…‹è®Šæ•¸
        let builderCurrentTarget = 0;
        let placeValueCurrentNumber = 0;
        let placeValueCurrentQuestionType = ''; // 'å€‹ä½', 'åä½', 'ç™¾ä½', 'åƒä½'
        let placeValueSelectedDigit = null;     // å„²å­˜è¢«é»æ“Šçš„ä½å€¼æ•¸å­—å…ƒç´ 

        let compareNum1 = 0;
        let compareNum2 = 0;
        let compareSelectedOperator = '';

        // å¾½ç« ç³»çµ±ç‹€æ…‹
        let badges = {
            'badge-adventurer': false,
            'badge-master': false,
            'badge-comparator': false,
            'badge-genius': false
        };

        // å¾LocalStorageè¼‰å…¥å¾½ç« ç‹€æ…‹
        function loadAchievements() {
            const savedBadges = localStorage.getItem('kevin_disney_math_badges');
            if (savedBadges) {
                badges = JSON.parse(savedBadges);
                updateAchievementsDisplay();
            }
        }

        // å°‡å¾½ç« ç‹€æ…‹å„²å­˜åˆ°LocalStorage
        function saveAchievements() {
            localStorage.setItem('kevin_disney_math_badges', JSON.stringify(badges));
        }

        // è§£é–å¾½ç« åŠŸèƒ½
        function unlockBadge(id) {
            if (!badges[id]) {
                badges[id] = true;
                playSfx(sfxWin);
                alert(`æ­å–œä½ è§£é–äº†ã€Œ${document.getElementById(id).querySelector('p').textContent}ã€å¾½ç« ï¼`);
                updateAchievementsDisplay();
                saveAchievements();
            }
        }

        // æ›´æ–°å¾½ç« é¡¯ç¤º
        function updateAchievementsDisplay() {
            for (const badgeId in badges) {
                const badgeElement = document.getElementById(badgeId);
                if (badgeElement) {
                    if (badges[badgeId]) {
                        badgeElement.classList.add('unlocked');
                        // å‡è¨­è§£é–åœ–ç‰‡çš„å‘½åè¦å‰‡æ˜¯ç§»é™¤ "_locked"
                        const img = badgeElement.querySelector('img');
                        if (img.src.includes('_locked')) {
                            img.src = img.src.replace('_locked', '');
                            img.alt = img.alt.replace(' (é–å®š)', '');
                        }
                    } else {
                        badgeElement.classList.remove('unlocked');
                        const img = badgeElement.querySelector('img');
                        if (!img.src.includes('_locked')) {
                            img.src = img.src.replace('.png', '_locked.png');
                            img.alt += ' (é–å®š)';
                        }
                    }
                }
            }
        }

        // èƒŒæ™¯éŸ³æ¨‚é–‹é—œ
        function toggleMusic() {
            if (musicEnabled) {
                backgroundMusic.pause();
                musicEnabled = false;
            } else {
                backgroundMusic.play();
                musicEnabled = true;
            }
        }

        // éŸ³æ•ˆé–‹é—œ
        function toggleSoundEffects() {
            sfxEnabled = !sfxEnabled;
        }

        // æ’­æ”¾éŸ³æ•ˆ
        function playSfx(sfxElement) {
            if (sfxEnabled) {
                sfxElement.currentTime = 0; // å¾é ­é–‹å§‹æ’­æ”¾
                sfxElement.play();
            }
        }

        // é–‹å§‹éŠæˆ²ï¼Œéš±è—é–‹é ­å ´æ™¯ä¸¦é¡¯ç¤ºéŠæˆ²é¢æ¿
        function startGame() {
            introMusic.play().catch(error => console.log("Intro music auto-play blocked:", error)); // å˜—è©¦æ’­æ”¾ï¼Œæ•ç²è‡ªå‹•æ’­æ”¾éŒ¯èª¤
            document.getElementById('intro-scene').classList.add('hidden');
            document.getElementById('game-dashboard').classList.remove('hidden');
            setTimeout(() => {
                introMusic.pause();
                backgroundMusic.play().catch(error => console.log("Background music auto-play blocked:", error)); // å˜—è©¦æ’­æ”¾
                musicEnabled = true;
                // åˆå§‹åŒ–æ‰€æœ‰éŠæˆ²
                generateNewBuilderNumber();
                generateNewPlaceValue();
                generateNewComparison();
                loadAchievements(); // è¼‰å…¥æˆå°±
            }, 3000); // ç­‰å¾… intro å‹•ç•«/éŸ³æ¨‚æ’­æ”¾ä¸€å°æ®µæ™‚é–“
        }

        // --- æ‹–æ›³é‚è¼¯ ---
        function drag(event) {
            playSfx(sfxDrop);
            event.dataTransfer.setData("text", event.target.dataset.value + ":" + event.target.dataset.type);
            event.dataTransfer.effectAllowed = "copy"; // å…è¨±è¤‡è£½
        }

        function allowDrop(event) {
            event.preventDefault(); // å…è¨±æ‹–æ›³åˆ°æ­¤å€
            if (event.target.classList.contains('drop-zone')) {
                event.target.classList.add('hover'); // è¦–è¦ºåé¥‹
            }
        }

        function leaveDrop(event) {
            if (event.target.classList.contains('drop-zone')) {
                event.target.classList.remove('hover'); // ç§»é™¤è¦–è¦ºåé¥‹
            }
        }

        function drop(event, zoneId) {
            event.preventDefault();
            const dropZone = event.target.closest('.drop-zone'); // ç¢ºä¿æ˜¯åœ¨æ‹–æ›³å€ä¸Š
            if (dropZone) {
                dropZone.classList.remove('hover');
                const data = event.dataTransfer.getData("text").split(":");
                const blockValue = parseInt(data[0]);
                const blockType = data[1];

                const newBlock = document.createElement('div');
                newBlock.className = `number-block dropped-block block-${blockType}`;
                newBlock.textContent = blockValue;
                newBlock.setAttribute('data-value', blockValue);
                newBlock.setAttribute('data-type', blockType);
                // å…è¨±å†æ¬¡æ‹–æ›³å·²æ”¾ç½®çš„ç©æœ¨ (å¯é¸æ“‡æ€§å¯¦ä½œï¼Œç›®å‰åªæ˜¯ç°¡å–®è¤‡è£½)
                newBlock.setAttribute('draggable', 'true');
                newBlock.addEventListener('dragstart', drag); // å†æ¬¡ç›£è½ drag äº‹ä»¶

                dropZone.appendChild(newBlock);
                playSfx(sfxDrop); // æ’­æ”¾æ”¾ç½®éŸ³æ•ˆ
            }
        }

        // --- æ•¸å­—å»ºæ§‹å™¨éŠæˆ² ---
        function generateNewBuilderNumber() {
            builderCurrentTarget = Math.floor(Math.random() * 9000) + 100; // ç”¢ç”Ÿ100åˆ°9099çš„æ•¸å­—
            document.getElementById('builderTargetNumber').textContent = builderCurrentTarget;
            document.getElementById('builderDropZone').innerHTML = ''; // æ¸…ç©ºæ”¾ç½®å€
            document.getElementById('builderFeedback').textContent = '';
        }

        function checkNumberBuilder() {
            const dropZone = document.getElementById('builderDropZone');
            const droppedBlocks = dropZone.querySelectorAll('.dropped-block');
            let sum = 0;
            droppedBlocks.forEach(block => {
                sum += parseInt(block.dataset.value);
            });

            const feedback = document.getElementById('builderFeedback');
            if (sum === builderCurrentTarget) {
                feedback.textContent = 'å¤ªæ£’äº†ï¼ä½ çµ„åˆå‡ºäº†æ­£ç¢ºçš„æ•¸å­—ï¼';
                feedback.className = 'feedback-message correct';
                playSfx(sfxCorrect);
                unlockBadge('badge-adventurer'); // æˆäºˆå¾½ç« 
            } else {
                feedback.textContent = `ä¸å°å–”ï¼Œä½ çµ„åˆçš„æ˜¯ ${sum}ï¼Œç›®æ¨™æ˜¯ ${builderCurrentTarget}ã€‚å†è©¦è©¦çœ‹ï¼`;
                feedback.className = 'feedback-message incorrect';
                playSfx(sfxIncorrect);
            }
        }

        // --- ä½å€¼è¾¨è­˜éŠæˆ² ---
        const placeValueTypes = ['å€‹ä½', 'åä½', 'ç™¾ä½', 'åƒä½'];
        // æ³¨æ„ï¼šé€™è£¡çš„ç´¢å¼•é †åºèˆ‡ numStr.padStart(4, '0') çš„ç´¢å¼•å°æ‡‰
        // åƒ(0) ç™¾(1) å(2) å€‹(3)
        const placeValueTypeToIndex = { 'åƒä½': 0, 'ç™¾ä½': 1, 'åä½': 2, 'å€‹ä½': 3 };

        function generateNewPlaceValue() {
            placeValueCurrentNumber = Math.floor(Math.random() * 9000) + 100; // 100 åˆ° 9099
            placeValueCurrentQuestionType = placeValueTypes[Math.floor(Math.random() * placeValueTypes.length)];
            document.getElementById('placeValueQuestion').textContent = placeValueCurrentQuestionType;

            const numStr = placeValueCurrentNumber.toString().padStart(4, '0'); // è£œé½Šæˆå››ä½æ•¸ï¼Œæ–¹ä¾¿ç´¢å¼•
            const displayDiv = document.getElementById('placeValueDisplay');
            displayDiv.innerHTML = '';
            placeValueSelectedDigit = null; // é‡ç½®é¸æ“‡

            for (let i = 0; i < numStr.length; i++) {
                const digitSpan = document.createElement('span');
                digitSpan.className = 'number-digit';
                digitSpan.textContent = numStr[i];
                digitSpan.dataset.index = i; // å„²å­˜æ•¸å­—åœ¨å­—ä¸²ä¸­çš„ç´¢å¼•
                digitSpan.addEventListener('click', selectDigit);
                displayDiv.appendChild(digitSpan);
            }
            document.getElementById('placeValueFeedback').textContent = '';
        }

        function selectDigit(event) {
            if (placeValueSelectedDigit) {
                placeValueSelectedDigit.classList.remove('selected'); // ç§»é™¤èˆŠçš„é¸ä¸­ç‹€æ…‹
            }
            placeValueSelectedDigit = event.target;
            placeValueSelectedDigit.classList.add('selected'); // æ·»åŠ æ–°çš„é¸ä¸­ç‹€æ…‹
        }

        function checkPlaceValue() {
            if (!placeValueSelectedDigit) {
                document.getElementById('placeValueFeedback').textContent = 'è«‹å…ˆé¸æ“‡ä¸€å€‹æ•¸å­—ï¼';
                document.getElementById('placeValueFeedback').className = 'feedback-message incorrect';
                playSfx(sfxIncorrect);
                return;
            }

            const numStr = placeValueCurrentNumber.toString().padStart(4, '0');
            const selectedIndex = parseInt(placeValueSelectedDigit.dataset.index);
            const targetIndex = placeValueTypeToIndex[placeValueCurrentQuestionType]; // ç²å–å•é¡Œå°æ‡‰çš„æ•¸å­—ç´¢å¼•

            let isCorrect = (selectedIndex === targetIndex && parseInt(placeValueSelectedDigit.textContent) === parseInt(numStr[targetIndex]));

            const feedback = document.getElementById('placeValueFeedback');
            if (isCorrect) {
                feedback.textContent = 'ç­”å°äº†ï¼ä½ çœŸæ˜¯ä½å€¼å¤§å¸«ï¼';
                feedback.className = 'feedback-message correct';
                playSfx(sfxCorrect);
                unlockBadge('badge-master');
            } else {
                feedback.textContent = 'ç­”éŒ¯äº†ï¼Œå†æƒ³æƒ³çœ‹ï¼';
                feedback.className = 'feedback-message incorrect';
                playSfx(sfxIncorrect);
            }
        }

        // --- æ•¸å­—æ¯”è¼ƒéŠæˆ² ---
        let currentOperator = ''; // å„²å­˜ä½¿ç”¨è€…é¸æ“‡çš„é‹ç®—ç¬¦è™Ÿ

        function generateNewComparison() {
            compareNum1 = Math.floor(Math.random() * 9000) + 100;
            compareNum2 = Math.floor(Math.random() * 9000) + 100;
            while (compareNum1 === compareNum2) { // ç¢ºä¿å…©å€‹æ•¸å­—ä¸åŒ
                compareNum2 = Math.floor(Math.random() * 9000) + 100;
            }

            document.getElementById('compareNumber1').textContent = compareNum1;
            document.getElementById('compareNumber2').textContent = compareNum2;
            document.getElementById('compareDropZone1').innerHTML = '';
            document.getElementById('compareDropZone2').innerHTML = '';
            document.getElementById('compareFeedback').textContent = '';

            // é‡ç½®é‹ç®—ç¬¦è™Ÿé¸æ“‡
            const operatorButtons = document.querySelectorAll('.operator-button');
            operatorButtons.forEach(btn => btn.classList.remove('selected'));
            currentOperator = '';
        }

        function selectOperator(button) {
            const operatorButtons = document.querySelectorAll('.operator-button');
            operatorButtons.forEach(btn => btn.classList.remove('selected')); // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„é¸ä¸­ç‹€æ…‹
            button.classList.add('selected'); // è¨­ç½®ç•¶å‰æŒ‰éˆ•ç‚ºé¸ä¸­ç‹€æ…‹
            currentOperator = button.dataset.operator; // å„²å­˜é¸æ“‡çš„é‹ç®—ç¬¦è™Ÿ
        }

        // è¨ˆç®—æ‹–æ›³å€å¡Šçš„ç¸½å’Œ
        function calculateDroppedSum(zoneId) {
            const dropZone = document.getElementById(zoneId);
            const droppedBlocks = dropZone.querySelectorAll('.dropped-block');
            let sum = 0;
            droppedBlocks.forEach(block => {
                sum += parseInt(block.dataset.value);
            });
            return sum;
        }

        function checkNumberComparison() {
            const sum1 = calculateDroppedSum('compareDropZone1');
            const sum2 = calculateDroppedSum('compareDropZone2');

            // æª¢æŸ¥ç©æœ¨æ˜¯å¦éƒ½å·²æ”¾ç½®ï¼Œä¸”é‹ç®—ç¬¦è™Ÿå·²é¸æ“‡
            if (sum1 === 0 || sum2 === 0 || currentOperator === '') {
                document.getElementById('compareFeedback').textContent = 'è«‹å…ˆæ‹–æ›³ç©æœ¨ä¸¦é¸æ“‡é‹ç®—ç¬¦è™Ÿï¼';
                document.getElementById('compareFeedback').className = 'feedback-message incorrect';
                playSfx(sfxIncorrect);
                return;
            }

            let actualResult; // å¯¦éš›çš„æ¯”è¼ƒçµæœ
            if (compareNum1 < compareNum2) actualResult = '<';
            else if (compareNum1 > compareNum2) actualResult = '>';
            else actualResult = '=';

            const feedback = document.getElementById('compareFeedback');
            // æª¢æŸ¥ä½¿ç”¨è€…æ˜¯å¦æ­£ç¢ºåœ°ç”¨ç©æœ¨çµ„åˆæˆç›®æ¨™æ•¸å­—ï¼Œä¸¦ä¸”é¸æ“‡äº†æ­£ç¢ºçš„é‹ç®—ç¬¦è™Ÿ
            if (sum1 === compareNum1 && sum2 === compareNum2 && currentOperator === actualResult) {
                feedback.textContent = `å¤ªæ£’äº†ï¼${compareNum1} ${currentOperator} ${compareNum2} æ˜¯æ­£ç¢ºçš„ï¼`;
                feedback.className = 'feedback-message correct';
                playSfx(sfxCorrect);
                unlockBadge('badge-comparator'); // æˆäºˆå¾½ç« 
            } else if (sum1 !== compareNum1 || sum2 !== compareNum2) {
                feedback.textContent = `æ•¸å­—ç©æœ¨çµ„åˆä¸æ­£ç¢ºã€‚ç¬¬ä¸€å€‹æ‡‰è©²çµ„åˆå‡º ${compareNum1}ï¼Œç¬¬äºŒå€‹çµ„åˆå‡º ${compareNum2}ã€‚`;
                feedback.className = 'feedback-message incorrect';
                playSfx(sfxIncorrect);
            } else {
                feedback.textContent = `é‹ç®—ç¬¦è™Ÿä¸å°å–”ï¼${compareNum1} ${actualResult} ${compareNum2} æ‰æ˜¯æ­£ç¢ºçš„ã€‚å†è©¦è©¦çœ‹ï¼`;
                feedback.className = 'feedback-message incorrect';
                playSfx(sfxIncorrect);
            }
        }

        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        window.onload = function() {
            loadAchievements(); // è¼‰å…¥å¾½ç« ç‹€æ…‹
        };
    </script>
</body>
</html>